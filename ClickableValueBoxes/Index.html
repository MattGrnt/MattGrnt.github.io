<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>using-value-boxes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="Using value boxes_files/libs/clipboard/clipboard.min.js"></script>
<script src="Using value boxes_files/libs/quarto-html/quarto.js"></script>
<script src="Using value boxes_files/libs/quarto-html/popper.min.js"></script>
<script src="Using value boxes_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Using value boxes_files/libs/quarto-html/anchor.min.js"></script>
<link href="Using value boxes_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Using value boxes_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Using value boxes_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Using value boxes_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Using value boxes_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">



<section id="clickable-value-boxes-in-shiny" class="level1">
<h1>Clickable value boxes in shiny</h1>
<div class="cell" data-context="setup">
<details>
<summary>Libraries used in this tutorial</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shinydashboard)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bslib)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="local-stats-dashboard" class="level2">
<h2 class="anchored" data-anchor-id="local-stats-dashboard">Local stats dashboard</h2>
<p>I first used value boxes in the local stats dashboard so that I could provide people with a high level stat on the front page, and added on a click through ability so visitors could be taken to the relevant metric tab.</p>
<p>One of the major benefits of this was for mobile visitors, who would often get stuck on the first page of the dashboard because the sidebar had been hidden by default. This tutorial will show how to build the initial value boxes, change the styling of the boxes to fit our brand guidelines, and then add the interactivity.</p>
<div class="complete quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 16.7%;justify-content: center;">
<p>&nbsp;</p>
</div>
<div class="cell quarto-layout-cell" style="flex-basis: 66.7%;justify-content: center;">
<div class="cell-output-display">
<style type="text/css">
          /* round the corner of boxes on home tab */
            #incidence_VB .bslib-value-box {
              border-radius: 6px;
            }
          /*set font size of title in box on home tab*/
            #incidence_VB .bslib-value-box .value-box-title {
              font-size: 15px;
              font-family: Poppins, Arial Bold, Arial, sans-serif;
              margin-bottom: 5px;
            }

            #incidence_VB .bslib-value-box .value-box-value {
                font-size: 28px;
                font-family: Progress Medium, Arial Bold, Arial, sans-serif;
                margin-bottom: 5px;
            }

          /*icon colour for value boxes */
        #incidence_VB .fa-people-group {
              opacity: 1;
              color: #009cee;
              font-size: 3rem;
          }

        #incidence_VB .bslib-value-box .value-box-showcase .bi, .bslib-value-box .value-box-showcase .fa, .bslib-value-box .value-box-showcase .fab, .bslib-value-box .value-box-showcase .fas, .bslib {                
                padding-left: 0px;
                padding-right: 10px;
                padding-top: 10px;
                padding-bottom: 10px;
                margin-bottom: 5px;
        }
        
          #incidence_VB a:link {
           color: #009cee;
          }

         #incidence_VB a:hover {
           color: #4dbaf3;
         }
          </style>
</div>
<div class="cell-output-display no-overflow-x">

<div class="form-group shiny-input-container" style="width:100%;">
<label class="control-label" id="select_conList-label" for="select_conList"></label>
<div>
<select class="shiny-input-select form-control" id="select_conList"><optgroup label="Future constituency">
<option value="Aberafan Maesteg" selected="">Aberafan Maesteg</option>
<option value="Aberdeen North">Aberdeen North</option>
<option value="Aberdeen South">Aberdeen South</option>
<option value="Aberdeenshire North and Moray East">Aberdeenshire North and Moray East</option>
<option value="Airdrie and Shotts">Airdrie and Shotts</option>
<option value="Aldershot">Aldershot</option>
<option value="Aldridge-Brownhills">Aldridge-Brownhills</option>
<option value="Alloa and Grangemouth">Alloa and Grangemouth</option>
<option value="Altrincham and Sale West">Altrincham and Sale West</option>
<option value="Alyn and Deeside">Alyn and Deeside</option>
<option value="Amber Valley">Amber Valley</option>
<option value="Angus and Perthshire Glens">Angus and Perthshire Glens</option>
<option value="Arbroath and Broughty Ferry">Arbroath and Broughty Ferry</option>
<option value="Argyll, Bute and South Lochaber">Argyll, Bute and South Lochaber</option>
<option value="Arundel and South Downs">Arundel and South Downs</option>
<option value="Ashfield">Ashfield</option>
<option value="Ashford">Ashford</option>
<option value="Ashton-under-Lyne">Ashton-under-Lyne</option>
<option value="Aylesbury">Aylesbury</option>
<option value="Ayr, Carrick and Cumnock">Ayr, Carrick and Cumnock</option>
<option value="Banbury">Banbury</option>
<option value="Bangor Aberconwy">Bangor Aberconwy</option>
<option value="Barking">Barking</option>
<option value="Barnsley North">Barnsley North</option>
<option value="Barnsley South">Barnsley South</option>
<option value="Barrow and Furness">Barrow and Furness</option>
<option value="Basildon and Billericay">Basildon and Billericay</option>
<option value="Basingstoke">Basingstoke</option>
<option value="Bassetlaw">Bassetlaw</option>
<option value="Bath">Bath</option>
<option value="Bathgate and Linlithgow">Bathgate and Linlithgow</option>
<option value="Battersea">Battersea</option>
<option value="Beaconsfield">Beaconsfield</option>
<option value="Beckenham and Penge">Beckenham and Penge</option>
<option value="Bedford">Bedford</option>
<option value="Belfast East">Belfast East</option>
<option value="Belfast North">Belfast North</option>
<option value="Belfast South and Mid Down">Belfast South and Mid Down</option>
<option value="Belfast West">Belfast West</option>
<option value="Bermondsey and Old Southwark">Bermondsey and Old Southwark</option>
<option value="Berwickshire, Roxburgh and Selkirk">Berwickshire, Roxburgh and Selkirk</option>
<option value="Bethnal Green and Stepney">Bethnal Green and Stepney</option>
<option value="Beverley and Holderness">Beverley and Holderness</option>
<option value="Bexhill and Battle">Bexhill and Battle</option>
<option value="Bexleyheath and Crayford">Bexleyheath and Crayford</option>
<option value="Bicester and Woodstock">Bicester and Woodstock</option>
<option value="Birkenhead">Birkenhead</option>
<option value="Birmingham Edgbaston">Birmingham Edgbaston</option>
<option value="Birmingham Erdington">Birmingham Erdington</option>
<option value="Birmingham Hall Green and Moseley">Birmingham Hall Green and Moseley</option>
<option value="Birmingham Hodge Hill and Solihull North">Birmingham Hodge Hill and Solihull North</option>
<option value="Birmingham Ladywood">Birmingham Ladywood</option>
<option value="Birmingham Northfield">Birmingham Northfield</option>
<option value="Birmingham Perry Barr">Birmingham Perry Barr</option>
<option value="Birmingham Selly Oak">Birmingham Selly Oak</option>
<option value="Birmingham Yardley">Birmingham Yardley</option>
<option value="Bishop Auckland">Bishop Auckland</option>
<option value="Blackburn">Blackburn</option>
<option value="Blackley and Middleton South">Blackley and Middleton South</option>
<option value="Blackpool North and Fleetwood">Blackpool North and Fleetwood</option>
<option value="Blackpool South">Blackpool South</option>
<option value="Blaenau Gwent and Rhymney">Blaenau Gwent and Rhymney</option>
<option value="Blaydon and Consett">Blaydon and Consett</option>
<option value="Blyth and Ashington">Blyth and Ashington</option>
<option value="Bognor Regis and Littlehampton">Bognor Regis and Littlehampton</option>
<option value="Bolsover">Bolsover</option>
<option value="Bolton North East">Bolton North East</option>
<option value="Bolton South and Walkden">Bolton South and Walkden</option>
<option value="Bolton West">Bolton West</option>
<option value="Bootle">Bootle</option>
<option value="Boston and Skegness">Boston and Skegness</option>
<option value="Bournemouth East">Bournemouth East</option>
<option value="Bournemouth West">Bournemouth West</option>
<option value="Bracknell">Bracknell</option>
<option value="Bradford East">Bradford East</option>
<option value="Bradford South">Bradford South</option>
<option value="Bradford West">Bradford West</option>
<option value="Braintree">Braintree</option>
<option value="Brecon, Radnor and Cwm Tawe">Brecon, Radnor and Cwm Tawe</option>
<option value="Brent East">Brent East</option>
<option value="Brent West">Brent West</option>
<option value="Brentford and Isleworth">Brentford and Isleworth</option>
<option value="Brentwood and Ongar">Brentwood and Ongar</option>
<option value="Bridgend">Bridgend</option>
<option value="Bridgwater">Bridgwater</option>
<option value="Bridlington and The Wolds">Bridlington and The Wolds</option>
<option value="Brigg and Immingham">Brigg and Immingham</option>
<option value="Brighton Kemptown and Peacehaven">Brighton Kemptown and Peacehaven</option>
<option value="Brighton Pavilion">Brighton Pavilion</option>
<option value="Bristol Central">Bristol Central</option>
<option value="Bristol East">Bristol East</option>
<option value="Bristol North East">Bristol North East</option>
<option value="Bristol North West">Bristol North West</option>
<option value="Bristol South">Bristol South</option>
<option value="Broadland and Fakenham">Broadland and Fakenham</option>
<option value="Bromley and Biggin Hill">Bromley and Biggin Hill</option>
<option value="Bromsgrove">Bromsgrove</option>
<option value="Broxbourne">Broxbourne</option>
<option value="Broxtowe">Broxtowe</option>
<option value="Buckingham and Bletchley">Buckingham and Bletchley</option>
<option value="Burnley">Burnley</option>
<option value="Burton and Uttoxeter">Burton and Uttoxeter</option>
<option value="Bury North">Bury North</option>
<option value="Bury South">Bury South</option>
<option value="Bury St Edmunds and Stowmarket">Bury St Edmunds and Stowmarket</option>
<option value="Caerfyrddin">Caerfyrddin</option>
<option value="Caerphilly">Caerphilly</option>
<option value="Caithness, Sutherland and Easter Ross">Caithness, Sutherland and Easter Ross</option>
<option value="Calder Valley">Calder Valley</option>
<option value="Camborne and Redruth">Camborne and Redruth</option>
<option value="Cambridge">Cambridge</option>
<option value="Cannock Chase">Cannock Chase</option>
<option value="Canterbury">Canterbury</option>
<option value="Cardiff East">Cardiff East</option>
<option value="Cardiff North">Cardiff North</option>
<option value="Cardiff South and Penarth">Cardiff South and Penarth</option>
<option value="Cardiff West">Cardiff West</option>
<option value="Carlisle">Carlisle</option>
<option value="Carshalton and Wallington">Carshalton and Wallington</option>
<option value="Castle Point">Castle Point</option>
<option value="Central Ayrshire">Central Ayrshire</option>
<option value="Central Devon">Central Devon</option>
<option value="Central Suffolk and North Ipswich">Central Suffolk and North Ipswich</option>
<option value="Ceredigion Preseli">Ceredigion Preseli</option>
<option value="Chatham and Aylesford">Chatham and Aylesford</option>
<option value="Cheadle">Cheadle</option>
<option value="Chelmsford">Chelmsford</option>
<option value="Chelsea and Fulham">Chelsea and Fulham</option>
<option value="Cheltenham">Cheltenham</option>
<option value="Chesham and Amersham">Chesham and Amersham</option>
<option value="Chester North and Neston">Chester North and Neston</option>
<option value="Chester South and Eddisbury">Chester South and Eddisbury</option>
<option value="Chesterfield">Chesterfield</option>
<option value="Chichester">Chichester</option>
<option value="Chingford and Woodford Green">Chingford and Woodford Green</option>
<option value="Chippenham">Chippenham</option>
<option value="Chipping Barnet">Chipping Barnet</option>
<option value="Chorley">Chorley</option>
<option value="Christchurch">Christchurch</option>
<option value="Cities of London and Westminster">Cities of London and Westminster</option>
<option value="City of Durham">City of Durham</option>
<option value="Clacton">Clacton</option>
<option value="Clapham and Brixton Hill">Clapham and Brixton Hill</option>
<option value="Clwyd East">Clwyd East</option>
<option value="Clwyd North">Clwyd North</option>
<option value="Coatbridge and Bellshill">Coatbridge and Bellshill</option>
<option value="Colchester">Colchester</option>
<option value="Colne Valley">Colne Valley</option>
<option value="Congleton">Congleton</option>
<option value="Corby and East Northamptonshire">Corby and East Northamptonshire</option>
<option value="Coventry East">Coventry East</option>
<option value="Coventry North West">Coventry North West</option>
<option value="Coventry South">Coventry South</option>
<option value="Cowdenbeath and Kirkcaldy">Cowdenbeath and Kirkcaldy</option>
<option value="Cramlington and Killingworth">Cramlington and Killingworth</option>
<option value="Crawley">Crawley</option>
<option value="Crewe and Nantwich">Crewe and Nantwich</option>
<option value="Croydon East">Croydon East</option>
<option value="Croydon South">Croydon South</option>
<option value="Croydon West">Croydon West</option>
<option value="Cumbernauld and Kirkintilloch">Cumbernauld and Kirkintilloch</option>
<option value="Dagenham and Rainham">Dagenham and Rainham</option>
<option value="Darlington">Darlington</option>
<option value="Dartford">Dartford</option>
<option value="Daventry">Daventry</option>
<option value="Derby North">Derby North</option>
<option value="Derby South">Derby South</option>
<option value="Derbyshire Dales">Derbyshire Dales</option>
<option value="Dewsbury and Batley">Dewsbury and Batley</option>
<option value="Didcot and Wantage">Didcot and Wantage</option>
<option value="Doncaster Central">Doncaster Central</option>
<option value="Doncaster East and the Isle of Axholme">Doncaster East and the Isle of Axholme</option>
<option value="Doncaster North">Doncaster North</option>
<option value="Dorking and Horley">Dorking and Horley</option>
<option value="Dover and Deal">Dover and Deal</option>
<option value="Droitwich and Evesham">Droitwich and Evesham</option>
<option value="Dudley">Dudley</option>
<option value="Dulwich and West Norwood">Dulwich and West Norwood</option>
<option value="Dumfries and Galloway">Dumfries and Galloway</option>
<option value="Dumfriesshire, Clydesdale and Tweeddale">Dumfriesshire, Clydesdale and Tweeddale</option>
<option value="Dundee Central">Dundee Central</option>
<option value="Dunfermline and Dollar">Dunfermline and Dollar</option>
<option value="Dunstable and Leighton Buzzard">Dunstable and Leighton Buzzard</option>
<option value="Dwyfor Meirionnydd">Dwyfor Meirionnydd</option>
<option value="Ealing Central and Acton">Ealing Central and Acton</option>
<option value="Ealing North">Ealing North</option>
<option value="Ealing Southall">Ealing Southall</option>
<option value="Earley and Woodley">Earley and Woodley</option>
<option value="Easington">Easington</option>
<option value="East Antrim">East Antrim</option>
<option value="East Grinstead and Uckfield">East Grinstead and Uckfield</option>
<option value="East Ham">East Ham</option>
<option value="East Hampshire">East Hampshire</option>
<option value="East Kilbride and Strathaven">East Kilbride and Strathaven</option>
<option value="East Londonderry">East Londonderry</option>
<option value="East Renfrewshire">East Renfrewshire</option>
<option value="East Surrey">East Surrey</option>
<option value="East Thanet">East Thanet</option>
<option value="East Wiltshire">East Wiltshire</option>
<option value="East Worthing and Shoreham">East Worthing and Shoreham</option>
<option value="Eastbourne">Eastbourne</option>
<option value="Eastleigh">Eastleigh</option>
<option value="Edinburgh East and Musselburgh">Edinburgh East and Musselburgh</option>
<option value="Edinburgh North and Leith">Edinburgh North and Leith</option>
<option value="Edinburgh South">Edinburgh South</option>
<option value="Edinburgh South West">Edinburgh South West</option>
<option value="Edinburgh West">Edinburgh West</option>
<option value="Edmonton and Winchmore Hill">Edmonton and Winchmore Hill</option>
<option value="Ellesmere Port and Bromborough">Ellesmere Port and Bromborough</option>
<option value="Eltham and Chislehurst">Eltham and Chislehurst</option>
<option value="Ely and East Cambridgeshire">Ely and East Cambridgeshire</option>
<option value="Enfield North">Enfield North</option>
<option value="Epping Forest">Epping Forest</option>
<option value="Epsom and Ewell">Epsom and Ewell</option>
<option value="Erewash">Erewash</option>
<option value="Erith and Thamesmead">Erith and Thamesmead</option>
<option value="Esher and Walton">Esher and Walton</option>
<option value="Exeter">Exeter</option>
<option value="Exmouth and Exeter East">Exmouth and Exeter East</option>
<option value="Falkirk">Falkirk</option>
<option value="Fareham and Waterlooville">Fareham and Waterlooville</option>
<option value="Farnham and Bordon">Farnham and Bordon</option>
<option value="Faversham and Mid Kent">Faversham and Mid Kent</option>
<option value="Feltham and Heston">Feltham and Heston</option>
<option value="Fermanagh and South Tyrone">Fermanagh and South Tyrone</option>
<option value="Filton and Bradley Stoke">Filton and Bradley Stoke</option>
<option value="Finchley and Golders Green">Finchley and Golders Green</option>
<option value="Folkestone and Hythe">Folkestone and Hythe</option>
<option value="Forest of Dean">Forest of Dean</option>
<option value="Foyle">Foyle</option>
<option value="Frome and East Somerset">Frome and East Somerset</option>
<option value="Fylde">Fylde</option>
<option value="Gainsborough">Gainsborough</option>
<option value="Gateshead Central and Whickham">Gateshead Central and Whickham</option>
<option value="Gedling">Gedling</option>
<option value="Gillingham and Rainham">Gillingham and Rainham</option>
<option value="Glasgow East">Glasgow East</option>
<option value="Glasgow North">Glasgow North</option>
<option value="Glasgow North East">Glasgow North East</option>
<option value="Glasgow South">Glasgow South</option>
<option value="Glasgow South West">Glasgow South West</option>
<option value="Glasgow West">Glasgow West</option>
<option value="Glastonbury and Somerton">Glastonbury and Somerton</option>
<option value="Glenrothes and Mid Fife">Glenrothes and Mid Fife</option>
<option value="Gloucester">Gloucester</option>
<option value="Godalming and Ash">Godalming and Ash</option>
<option value="Goole and Pocklington">Goole and Pocklington</option>
<option value="Gordon and Buchan">Gordon and Buchan</option>
<option value="Gorton and Denton">Gorton and Denton</option>
<option value="Gosport">Gosport</option>
<option value="Gower">Gower</option>
<option value="Grantham and Bourne">Grantham and Bourne</option>
<option value="Gravesham">Gravesham</option>
<option value="Great Grimsby and Cleethorpes">Great Grimsby and Cleethorpes</option>
<option value="Great Yarmouth">Great Yarmouth</option>
<option value="Greenwich and Woolwich">Greenwich and Woolwich</option>
<option value="Guildford">Guildford</option>
<option value="Hackney North and Stoke Newington">Hackney North and Stoke Newington</option>
<option value="Hackney South and Shoreditch">Hackney South and Shoreditch</option>
<option value="Halesowen">Halesowen</option>
<option value="Halifax">Halifax</option>
<option value="Hamble Valley">Hamble Valley</option>
<option value="Hamilton and Clyde Valley">Hamilton and Clyde Valley</option>
<option value="Hammersmith and Chiswick">Hammersmith and Chiswick</option>
<option value="Hampstead and Highgate">Hampstead and Highgate</option>
<option value="Harborough, Oadby and Wigston">Harborough, Oadby and Wigston</option>
<option value="Harlow">Harlow</option>
<option value="Harpenden and Berkhamsted">Harpenden and Berkhamsted</option>
<option value="Harrogate and Knaresborough">Harrogate and Knaresborough</option>
<option value="Harrow East">Harrow East</option>
<option value="Harrow West">Harrow West</option>
<option value="Hartlepool">Hartlepool</option>
<option value="Harwich and North Essex">Harwich and North Essex</option>
<option value="Hastings and Rye">Hastings and Rye</option>
<option value="Havant">Havant</option>
<option value="Hayes and Harlington">Hayes and Harlington</option>
<option value="Hazel Grove">Hazel Grove</option>
<option value="Hemel Hempstead">Hemel Hempstead</option>
<option value="Hendon">Hendon</option>
<option value="Henley and Thame">Henley and Thame</option>
<option value="Hereford and South Herefordshire">Hereford and South Herefordshire</option>
<option value="Herne Bay and Sandwich">Herne Bay and Sandwich</option>
<option value="Hertford and Stortford">Hertford and Stortford</option>
<option value="Hertsmere">Hertsmere</option>
<option value="Hexham">Hexham</option>
<option value="Heywood and Middleton North">Heywood and Middleton North</option>
<option value="High Peak">High Peak</option>
<option value="Hinckley and Bosworth">Hinckley and Bosworth</option>
<option value="Hitchin">Hitchin</option>
<option value="Holborn and St Pancras">Holborn and St Pancras</option>
<option value="Honiton and Sidmouth">Honiton and Sidmouth</option>
<option value="Hornchurch and Upminster">Hornchurch and Upminster</option>
<option value="Hornsey and Friern Barnet">Hornsey and Friern Barnet</option>
<option value="Horsham">Horsham</option>
<option value="Houghton and Sunderland South">Houghton and Sunderland South</option>
<option value="Hove and Portslade">Hove and Portslade</option>
<option value="Huddersfield">Huddersfield</option>
<option value="Huntingdon">Huntingdon</option>
<option value="Hyndburn">Hyndburn</option>
<option value="Ilford North">Ilford North</option>
<option value="Ilford South">Ilford South</option>
<option value="Inverclyde and Renfrewshire West">Inverclyde and Renfrewshire West</option>
<option value="Inverness, Skye and West Ross-shire">Inverness, Skye and West Ross-shire</option>
<option value="Ipswich">Ipswich</option>
<option value="Isle of Wight East">Isle of Wight East</option>
<option value="Isle of Wight West">Isle of Wight West</option>
<option value="Islington North">Islington North</option>
<option value="Islington South and Finsbury">Islington South and Finsbury</option>
<option value="Jarrow and Gateshead East">Jarrow and Gateshead East</option>
<option value="Keighley and Ilkley">Keighley and Ilkley</option>
<option value="Kenilworth and Southam">Kenilworth and Southam</option>
<option value="Kensington and Bayswater">Kensington and Bayswater</option>
<option value="Kettering">Kettering</option>
<option value="Kilmarnock and Loudoun">Kilmarnock and Loudoun</option>
<option value="Kingston and Surbiton">Kingston and Surbiton</option>
<option value="Kingston upon Hull East">Kingston upon Hull East</option>
<option value="Kingston upon Hull North and Cottingham">Kingston upon Hull North and Cottingham</option>
<option value="Kingston upon Hull West and Haltemprice">Kingston upon Hull West and Haltemprice</option>
<option value="Kingswinford and South Staffordshire">Kingswinford and South Staffordshire</option>
<option value="Knowsley">Knowsley</option>
<option value="Lagan Valley">Lagan Valley</option>
<option value="Lancaster and Wyre">Lancaster and Wyre</option>
<option value="Leeds Central and Headingley">Leeds Central and Headingley</option>
<option value="Leeds East">Leeds East</option>
<option value="Leeds North East">Leeds North East</option>
<option value="Leeds North West">Leeds North West</option>
<option value="Leeds South">Leeds South</option>
<option value="Leeds South West and Morley">Leeds South West and Morley</option>
<option value="Leeds West and Pudsey">Leeds West and Pudsey</option>
<option value="Leicester East">Leicester East</option>
<option value="Leicester South">Leicester South</option>
<option value="Leicester West">Leicester West</option>
<option value="Leigh and Atherton">Leigh and Atherton</option>
<option value="Lewes">Lewes</option>
<option value="Lewisham East">Lewisham East</option>
<option value="Lewisham North">Lewisham North</option>
<option value="Lewisham West and East Dulwich">Lewisham West and East Dulwich</option>
<option value="Leyton and Wanstead">Leyton and Wanstead</option>
<option value="Lichfield">Lichfield</option>
<option value="Lincoln">Lincoln</option>
<option value="Liverpool Garston">Liverpool Garston</option>
<option value="Liverpool Riverside">Liverpool Riverside</option>
<option value="Liverpool Walton">Liverpool Walton</option>
<option value="Liverpool Wavertree">Liverpool Wavertree</option>
<option value="Liverpool West Derby">Liverpool West Derby</option>
<option value="Livingston">Livingston</option>
<option value="Llanelli">Llanelli</option>
<option value="Lothian East">Lothian East</option>
<option value="Loughborough">Loughborough</option>
<option value="Louth and Horncastle">Louth and Horncastle</option>
<option value="Lowestoft">Lowestoft</option>
<option value="Luton North">Luton North</option>
<option value="Luton South and South Bedfordshire">Luton South and South Bedfordshire</option>
<option value="Macclesfield">Macclesfield</option>
<option value="Maidenhead">Maidenhead</option>
<option value="Maidstone and Malling">Maidstone and Malling</option>
<option value="Makerfield">Makerfield</option>
<option value="Maldon">Maldon</option>
<option value="Manchester Central">Manchester Central</option>
<option value="Manchester Rusholme">Manchester Rusholme</option>
<option value="Manchester Withington">Manchester Withington</option>
<option value="Mansfield">Mansfield</option>
<option value="Melksham and Devizes">Melksham and Devizes</option>
<option value="Melton and Syston">Melton and Syston</option>
<option value="Meriden and Solihull East">Meriden and Solihull East</option>
<option value="Merthyr Tydfil and Aberdare">Merthyr Tydfil and Aberdare</option>
<option value="Mid Bedfordshire">Mid Bedfordshire</option>
<option value="Mid Buckinghamshire">Mid Buckinghamshire</option>
<option value="Mid Cheshire">Mid Cheshire</option>
<option value="Mid Derbyshire">Mid Derbyshire</option>
<option value="Mid Dorset and North Poole">Mid Dorset and North Poole</option>
<option value="Mid Dunbartonshire">Mid Dunbartonshire</option>
<option value="Mid Leicestershire">Mid Leicestershire</option>
<option value="Mid Norfolk">Mid Norfolk</option>
<option value="Mid Sussex">Mid Sussex</option>
<option value="Mid Ulster">Mid Ulster</option>
<option value="Mid and South Pembrokeshire">Mid and South Pembrokeshire</option>
<option value="Middlesbrough South and East Cleveland">Middlesbrough South and East Cleveland</option>
<option value="Middlesbrough and Thornaby East">Middlesbrough and Thornaby East</option>
<option value="Midlothian">Midlothian</option>
<option value="Milton Keynes Central">Milton Keynes Central</option>
<option value="Milton Keynes North">Milton Keynes North</option>
<option value="Mitcham and Morden">Mitcham and Morden</option>
<option value="Monmouthshire">Monmouthshire</option>
<option value="Montgomeryshire and Glyndwr">Montgomeryshire and Glyndwr</option>
<option value="Moray West, Nairn and Strathspey">Moray West, Nairn and Strathspey</option>
<option value="Morecambe and Lunesdale">Morecambe and Lunesdale</option>
<option value="Motherwell, Wishaw and Carluke">Motherwell, Wishaw and Carluke</option>
<option value="Na h-Eileanan an Iar">Na h-Eileanan an Iar</option>
<option value="Neath and Swansea East">Neath and Swansea East</option>
<option value="New Forest East">New Forest East</option>
<option value="New Forest West">New Forest West</option>
<option value="Newark">Newark</option>
<option value="Newbury">Newbury</option>
<option value="Newcastle upon Tyne Central and West">Newcastle upon Tyne Central and West</option>
<option value="Newcastle upon Tyne East and Wallsend">Newcastle upon Tyne East and Wallsend</option>
<option value="Newcastle upon Tyne North">Newcastle upon Tyne North</option>
<option value="Newcastle-under-Lyme">Newcastle-under-Lyme</option>
<option value="Newport East">Newport East</option>
<option value="Newport West and Islwyn">Newport West and Islwyn</option>
<option value="Newry and Armagh">Newry and Armagh</option>
<option value="Newton Abbot">Newton Abbot</option>
<option value="Newton Aycliffe and Spennymoor">Newton Aycliffe and Spennymoor</option>
<option value="Normanton and Hemsworth">Normanton and Hemsworth</option>
<option value="North Antrim">North Antrim</option>
<option value="North Ayrshire and Arran">North Ayrshire and Arran</option>
<option value="North Bedfordshire">North Bedfordshire</option>
<option value="North Cornwall">North Cornwall</option>
<option value="North Cotswolds">North Cotswolds</option>
<option value="North Devon">North Devon</option>
<option value="North Dorset">North Dorset</option>
<option value="North Down">North Down</option>
<option value="North Durham">North Durham</option>
<option value="North East Cambridgeshire">North East Cambridgeshire</option>
<option value="North East Derbyshire">North East Derbyshire</option>
<option value="North East Fife">North East Fife</option>
<option value="North East Hampshire">North East Hampshire</option>
<option value="North East Hertfordshire">North East Hertfordshire</option>
<option value="North East Somerset and Hanham">North East Somerset and Hanham</option>
<option value="North Herefordshire">North Herefordshire</option>
<option value="North Norfolk">North Norfolk</option>
<option value="North Northumberland">North Northumberland</option>
<option value="North Shropshire">North Shropshire</option>
<option value="North Somerset">North Somerset</option>
<option value="North Warwickshire and Bedworth">North Warwickshire and Bedworth</option>
<option value="North West Cambridgeshire">North West Cambridgeshire</option>
<option value="North West Essex">North West Essex</option>
<option value="North West Hampshire">North West Hampshire</option>
<option value="North West Leicestershire">North West Leicestershire</option>
<option value="North West Norfolk">North West Norfolk</option>
<option value="Northampton North">Northampton North</option>
<option value="Northampton South">Northampton South</option>
<option value="Norwich North">Norwich North</option>
<option value="Norwich South">Norwich South</option>
<option value="Nottingham East">Nottingham East</option>
<option value="Nottingham North and Kimberley">Nottingham North and Kimberley</option>
<option value="Nottingham South">Nottingham South</option>
<option value="Nuneaton">Nuneaton</option>
<option value="Old Bexley and Sidcup">Old Bexley and Sidcup</option>
<option value="Oldham East and Saddleworth">Oldham East and Saddleworth</option>
<option value="Oldham West, Chadderton and Royton">Oldham West, Chadderton and Royton</option>
<option value="Orkney and Shetland">Orkney and Shetland</option>
<option value="Orpington">Orpington</option>
<option value="Ossett and Denby Dale">Ossett and Denby Dale</option>
<option value="Oxford East">Oxford East</option>
<option value="Oxford West and Abingdon">Oxford West and Abingdon</option>
<option value="Paisley and Renfrewshire North">Paisley and Renfrewshire North</option>
<option value="Paisley and Renfrewshire South">Paisley and Renfrewshire South</option>
<option value="Peckham">Peckham</option>
<option value="Pendle and Clitheroe">Pendle and Clitheroe</option>
<option value="Penistone and Stocksbridge">Penistone and Stocksbridge</option>
<option value="Penrith and Solway">Penrith and Solway</option>
<option value="Perth and Kinross-shire">Perth and Kinross-shire</option>
<option value="Peterborough">Peterborough</option>
<option value="Plymouth Moor View">Plymouth Moor View</option>
<option value="Plymouth Sutton and Devonport">Plymouth Sutton and Devonport</option>
<option value="Pontefract, Castleford and Knottingley">Pontefract, Castleford and Knottingley</option>
<option value="Pontypridd">Pontypridd</option>
<option value="Poole">Poole</option>
<option value="Poplar and Limehouse">Poplar and Limehouse</option>
<option value="Portsmouth North">Portsmouth North</option>
<option value="Portsmouth South">Portsmouth South</option>
<option value="Preston">Preston</option>
<option value="Putney">Putney</option>
<option value="Queen's Park and Maida Vale">Queen's Park and Maida Vale</option>
<option value="Rawmarsh and Conisbrough">Rawmarsh and Conisbrough</option>
<option value="Rayleigh and Wickford">Rayleigh and Wickford</option>
<option value="Reading Central">Reading Central</option>
<option value="Reading West and Mid Berkshire">Reading West and Mid Berkshire</option>
<option value="Redcar">Redcar</option>
<option value="Redditch">Redditch</option>
<option value="Reigate">Reigate</option>
<option value="Rhondda and Ogmore">Rhondda and Ogmore</option>
<option value="Ribble Valley">Ribble Valley</option>
<option value="Richmond Park">Richmond Park</option>
<option value="Richmond and Northallerton">Richmond and Northallerton</option>
<option value="Rochdale">Rochdale</option>
<option value="Rochester and Strood">Rochester and Strood</option>
<option value="Romford">Romford</option>
<option value="Romsey and Southampton North">Romsey and Southampton North</option>
<option value="Rossendale and Darwen">Rossendale and Darwen</option>
<option value="Rother Valley">Rother Valley</option>
<option value="Rotherham">Rotherham</option>
<option value="Rugby">Rugby</option>
<option value="Ruislip, Northwood and Pinner">Ruislip, Northwood and Pinner</option>
<option value="Runcorn and Helsby">Runcorn and Helsby</option>
<option value="Runnymede and Weybridge">Runnymede and Weybridge</option>
<option value="Rushcliffe">Rushcliffe</option>
<option value="Rutherglen">Rutherglen</option>
<option value="Rutland and Stamford">Rutland and Stamford</option>
<option value="Salford">Salford</option>
<option value="Salisbury">Salisbury</option>
<option value="Scarborough and Whitby">Scarborough and Whitby</option>
<option value="Scunthorpe">Scunthorpe</option>
<option value="Sefton Central">Sefton Central</option>
<option value="Selby">Selby</option>
<option value="Sevenoaks">Sevenoaks</option>
<option value="Sheffield Brightside and Hillsborough">Sheffield Brightside and Hillsborough</option>
<option value="Sheffield Central">Sheffield Central</option>
<option value="Sheffield Hallam">Sheffield Hallam</option>
<option value="Sheffield Heeley">Sheffield Heeley</option>
<option value="Sheffield South East">Sheffield South East</option>
<option value="Sherwood Forest">Sherwood Forest</option>
<option value="Shipley">Shipley</option>
<option value="Shrewsbury">Shrewsbury</option>
<option value="Sittingbourne and Sheppey">Sittingbourne and Sheppey</option>
<option value="Skipton and Ripon">Skipton and Ripon</option>
<option value="Sleaford and North Hykeham">Sleaford and North Hykeham</option>
<option value="Slough">Slough</option>
<option value="Smethwick">Smethwick</option>
<option value="Solihull West and Shirley">Solihull West and Shirley</option>
<option value="South Antrim">South Antrim</option>
<option value="South Basildon and East Thurrock">South Basildon and East Thurrock</option>
<option value="South Cambridgeshire">South Cambridgeshire</option>
<option value="South Cotswolds">South Cotswolds</option>
<option value="South Derbyshire">South Derbyshire</option>
<option value="South Devon">South Devon</option>
<option value="South Dorset">South Dorset</option>
<option value="South Down">South Down</option>
<option value="South East Cornwall">South East Cornwall</option>
<option value="South Holland and The Deepings">South Holland and The Deepings</option>
<option value="South Leicestershire">South Leicestershire</option>
<option value="South Norfolk">South Norfolk</option>
<option value="South Northamptonshire">South Northamptonshire</option>
<option value="South Ribble">South Ribble</option>
<option value="South Shields">South Shields</option>
<option value="South Shropshire">South Shropshire</option>
<option value="South Suffolk">South Suffolk</option>
<option value="South West Devon">South West Devon</option>
<option value="South West Hertfordshire">South West Hertfordshire</option>
<option value="South West Norfolk">South West Norfolk</option>
<option value="South West Wiltshire">South West Wiltshire</option>
<option value="Southampton Itchen">Southampton Itchen</option>
<option value="Southampton Test">Southampton Test</option>
<option value="Southend East and Rochford">Southend East and Rochford</option>
<option value="Southend West and Leigh">Southend West and Leigh</option>
<option value="Southgate and Wood Green">Southgate and Wood Green</option>
<option value="Southport">Southport</option>
<option value="Spelthorne">Spelthorne</option>
<option value="Spen Valley">Spen Valley</option>
<option value="St Albans">St Albans</option>
<option value="St Austell and Newquay">St Austell and Newquay</option>
<option value="St Helens North">St Helens North</option>
<option value="St Helens South and Whiston">St Helens South and Whiston</option>
<option value="St Ives">St Ives</option>
<option value="St Neots and Mid Cambridgeshire">St Neots and Mid Cambridgeshire</option>
<option value="Stafford">Stafford</option>
<option value="Staffordshire Moorlands">Staffordshire Moorlands</option>
<option value="Stalybridge and Hyde">Stalybridge and Hyde</option>
<option value="Stevenage">Stevenage</option>
<option value="Stirling and Strathallan">Stirling and Strathallan</option>
<option value="Stockport">Stockport</option>
<option value="Stockton North">Stockton North</option>
<option value="Stockton West">Stockton West</option>
<option value="Stoke-on-Trent Central">Stoke-on-Trent Central</option>
<option value="Stoke-on-Trent North">Stoke-on-Trent North</option>
<option value="Stoke-on-Trent South">Stoke-on-Trent South</option>
<option value="Stone, Great Wyrley and Penkridge">Stone, Great Wyrley and Penkridge</option>
<option value="Stourbridge">Stourbridge</option>
<option value="Strangford">Strangford</option>
<option value="Stratford and Bow">Stratford and Bow</option>
<option value="Stratford-on-Avon">Stratford-on-Avon</option>
<option value="Streatham and Croydon North">Streatham and Croydon North</option>
<option value="Stretford and Urmston">Stretford and Urmston</option>
<option value="Stroud">Stroud</option>
<option value="Suffolk Coastal">Suffolk Coastal</option>
<option value="Sunderland Central">Sunderland Central</option>
<option value="Surrey Heath">Surrey Heath</option>
<option value="Sussex Weald">Sussex Weald</option>
<option value="Sutton Coldfield">Sutton Coldfield</option>
<option value="Sutton and Cheam">Sutton and Cheam</option>
<option value="Swansea West">Swansea West</option>
<option value="Swindon North">Swindon North</option>
<option value="Swindon South">Swindon South</option>
<option value="Tamworth">Tamworth</option>
<option value="Tatton">Tatton</option>
<option value="Taunton and Wellington">Taunton and Wellington</option>
<option value="Telford">Telford</option>
<option value="Tewkesbury">Tewkesbury</option>
<option value="The Wrekin">The Wrekin</option>
<option value="Thirsk and Malton">Thirsk and Malton</option>
<option value="Thornbury and Yate">Thornbury and Yate</option>
<option value="Thurrock">Thurrock</option>
<option value="Tipton and Wednesbury">Tipton and Wednesbury</option>
<option value="Tiverton and Minehead">Tiverton and Minehead</option>
<option value="Tonbridge">Tonbridge</option>
<option value="Tooting">Tooting</option>
<option value="Torbay">Torbay</option>
<option value="Torfaen">Torfaen</option>
<option value="Torridge and Tavistock">Torridge and Tavistock</option>
<option value="Tottenham">Tottenham</option>
<option value="Truro and Falmouth">Truro and Falmouth</option>
<option value="Tunbridge Wells">Tunbridge Wells</option>
<option value="Twickenham">Twickenham</option>
<option value="Tynemouth">Tynemouth</option>
<option value="Upper Bann">Upper Bann</option>
<option value="Uxbridge and South Ruislip">Uxbridge and South Ruislip</option>
<option value="Vale of Glamorgan">Vale of Glamorgan</option>
<option value="Vauxhall and Camberwell Green">Vauxhall and Camberwell Green</option>
<option value="Wakefield and Rothwell">Wakefield and Rothwell</option>
<option value="Wallasey">Wallasey</option>
<option value="Walsall and Bloxwich">Walsall and Bloxwich</option>
<option value="Walthamstow">Walthamstow</option>
<option value="Warrington North">Warrington North</option>
<option value="Warrington South">Warrington South</option>
<option value="Warwick and Leamington">Warwick and Leamington</option>
<option value="Washington and Gateshead South">Washington and Gateshead South</option>
<option value="Watford">Watford</option>
<option value="Waveney Valley">Waveney Valley</option>
<option value="Weald of Kent">Weald of Kent</option>
<option value="Wellingborough and Rushden">Wellingborough and Rushden</option>
<option value="Wells and Mendip Hills">Wells and Mendip Hills</option>
<option value="Welwyn Hatfield">Welwyn Hatfield</option>
<option value="West Aberdeenshire and Kincardine">West Aberdeenshire and Kincardine</option>
<option value="West Bromwich">West Bromwich</option>
<option value="West Dorset">West Dorset</option>
<option value="West Dunbartonshire">West Dunbartonshire</option>
<option value="West Ham and Beckton">West Ham and Beckton</option>
<option value="West Lancashire">West Lancashire</option>
<option value="West Suffolk">West Suffolk</option>
<option value="West Tyrone">West Tyrone</option>
<option value="West Worcestershire">West Worcestershire</option>
<option value="Westmorland and Lonsdale">Westmorland and Lonsdale</option>
<option value="Weston-super-Mare">Weston-super-Mare</option>
<option value="Wetherby and Easingwold">Wetherby and Easingwold</option>
<option value="Whitehaven and Workington">Whitehaven and Workington</option>
<option value="Widnes and Halewood">Widnes and Halewood</option>
<option value="Wigan">Wigan</option>
<option value="Wimbledon">Wimbledon</option>
<option value="Winchester">Winchester</option>
<option value="Windsor">Windsor</option>
<option value="Wirral West">Wirral West</option>
<option value="Witham">Witham</option>
<option value="Witney">Witney</option>
<option value="Woking">Woking</option>
<option value="Wokingham">Wokingham</option>
<option value="Wolverhampton North East">Wolverhampton North East</option>
<option value="Wolverhampton South East">Wolverhampton South East</option>
<option value="Wolverhampton West">Wolverhampton West</option>
<option value="Worcester">Worcester</option>
<option value="Worsley and Eccles">Worsley and Eccles</option>
<option value="Worthing West">Worthing West</option>
<option value="Wrexham">Wrexham</option>
<option value="Wycombe">Wycombe</option>
<option value="Wyre Forest">Wyre Forest</option>
<option value="Wythenshawe and Sale East">Wythenshawe and Sale East</option>
<option value="Yeovil">Yeovil</option>
<option value="Ynys Môn">Ynys Môn</option>
<option value="York Central">York Central</option>
<option value="York Outer">York Outer</option>
</optgroup></select>
<script type="application/json" data-for="select_conList" data-eval="[&quot;onInitialize&quot;]">{"placeholder":"Search for a constituency","onInitialize":"function() { this.setValue(\" \"); }","plugins":["selectize-plugin-a11y"]}</script>
</div>
</div>
</div>
</div>
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 16.7%;justify-content: center;">
<p>&nbsp;</p>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 16.7%;justify-content: center;">
<p>&nbsp;</p>
</div>
<div class="cell quarto-layout-cell" style="flex-basis: 66.7%;justify-content: center;">
<div class="cell-output-display">
<div class="card bslib-card bslib-mb-spacing bslib-card-input html-fill-item html-fill-container bslib-value-box border-0 showcase-left-center" data-bslib-card-init="" data-require-bs-caller="card() value_box()" data-require-bs-version="5 5" id="incidence_VB" style="color:#000000;background-color:#f7f7f7;--bslib-color-fg:#000000;--bslib-color-bg:#f7f7f7;">
<div class="card-body bslib-gap-spacing html-fill-item html-fill-container" style="margin-top:auto;margin-bottom:auto;flex:1 1 auto; padding:0;">
<div class="value-box-grid html-fill-item" style="--bslib-grid-height:auto;--bslib-grid-height-mobile:auto;---bslib-value-box-showcase-w:18%;---bslib-value-box-showcase-w-fs:1fr;---bslib-value-box-showcase-max-h:100px;---bslib-value-box-showcase-max-h-fs:67%;">
<div class="value-box-showcase html-fill-item html-fill-container">
<i class="fas fa-people-group fa-2x" role="presentation" aria-label="people-group icon"></i>
</div>
<div class="value-box-area html-fill-item html-fill-container">
<p class="value-box-title">
Cancer Incidence
</p><hr style="width:100%; 
               text-align:right; 
               margin-left:5; 
               border-top: 5px solid #000000; 
               margin-top: 5px; 
               margin-bottom: 10px;
               opacity: 1;">
<p></p>
<div class="shiny-html-output value-box-value" id="IncConValue"></div>
<p>
</p><div id="IncConDetail" class="shiny-html-output"></div>
<p></p>
<a id="link_to_incidence" href="#" class="action-button" style="text-align: right; padding: 5px; text-decoration: none; font-size: 15px">
<p>
explore metric 
<i class="fas fa-circle-chevron-right" role="presentation" aria-label="circle-chevron-right icon"></i>
</p>
</a>
</div>
</div>
</div>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script>
</div>
</div>
</div>
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 16.7%;justify-content: center;">
<p>&nbsp;</p>
</div>
</div>
</div>
<div class="cell" data-context="server">

</div>
</section>
<section id="building-the-value-box" class="level2">
<h2 class="anchored" data-anchor-id="building-the-value-box">Building the value box</h2>
<p>These specific value boxes are part of the <code>bslib</code> library. Although value boxes are available in standard <code>shiny</code>, I’m not going to cover them in this tutorial.</p>
<p>Useful reference docs for this function:</p>
<ul>
<li><p><a href="https://rstudio.github.io/bslib/articles/value-boxes/index.html" class="uri">https://rstudio.github.io/bslib/articles/value-boxes/index.html</a></p></li>
<li><p><a href="https://rstudio.github.io/bslib/reference/value_box.html" class="uri">https://rstudio.github.io/bslib/reference/value_box.html</a></p></li>
</ul>
<p>The value box has 4 main elements to it: <code>title</code>, <code>value</code>, <code>detail</code>, and the <code>showcase</code> element</p>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 16.7%;justify-content: center;">
<p>&nbsp;</p>
</div>
<div class="cell quarto-layout-cell" style="flex-basis: 66.7%;justify-content: center;">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">value_box</span>(<span class="at">title =</span> <span class="st">"The title"</span>,</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">value =</span> <span class="st">"The value"</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">showcase =</span> <span class="fu">icon</span>(<span class="st">"otter"</span>),</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>          <span class="st">"detail"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="card bslib-card bslib-mb-spacing html-fill-item html-fill-container bslib-value-box default showcase-left-center" data-bslib-card-init="" data-require-bs-caller="card() value_box()" data-require-bs-version="5 5">
<div class="card-body bslib-gap-spacing html-fill-item html-fill-container" style="margin-top:auto;margin-bottom:auto;flex:1 1 auto; padding:0;">
<div class="value-box-grid html-fill-item" style="--bslib-grid-height:auto;--bslib-grid-height-mobile:auto;---bslib-value-box-showcase-w:30%;---bslib-value-box-showcase-w-fs:1fr;---bslib-value-box-showcase-max-h:100px;---bslib-value-box-showcase-max-h-fs:67%;">
<div class="value-box-showcase html-fill-item html-fill-container">
<i class="fas fa-otter" role="presentation" aria-label="otter icon"></i>
</div>
<div class="value-box-area html-fill-item html-fill-container">
<p class="value-box-title">The title</p>
<p class="value-box-value">The value</p>
detail
</div>
</div>
</div>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script>
</div>
</div>
</div>
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 16.7%;justify-content: center;">
<p>&nbsp;</p>
</div>
</div>
</div>
<p>If we want any of these elements to be responsive, we can use <code>renderUI()</code> to transform any relevant data into a statement or value, and respond to any inputs from within <code>shiny</code>.</p>
<div class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 16.7%;justify-content: center;">
<p>&nbsp;</p>
</div>
<div class="cell quarto-layout-cell" style="flex-basis: 66.7%;justify-content: center;">
<div class="cell-output-display">
<div class="form-group shiny-input-container">
<label class="control-label" id="Slider-label" for="Slider">Select how many otters</label>
<input class="js-range-slider" id="Slider" data-skin="shiny" data-min="1" data-max="10" data-from="5" data-step="1" data-grid="true" data-grid-num="9" data-grid-snap="false" data-prettify-separator="," data-prettify-enabled="true" data-keyboard="true" data-data-type="number">
</div>
</div>
</div>
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 16.7%;justify-content: center;">
<p>&nbsp;</p>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 16.7%;justify-content: center;">
<p>&nbsp;</p>
</div>
<div class="cell quarto-layout-cell" style="flex-basis: 66.7%;justify-content: center;">
<details>
<summary>UI code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">value_box</span>(<span class="at">title =</span> <span class="st">"How many otters?"</span>,</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">value =</span> <span class="fu">uiOutput</span>(<span class="st">"OtterCount"</span>),</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">showcase =</span> <span class="fu">icon</span>(<span class="st">"otter"</span>),</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>          <span class="st">"detail"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="card bslib-card bslib-mb-spacing html-fill-item html-fill-container bslib-value-box default showcase-left-center" data-bslib-card-init="" data-require-bs-caller="card() value_box()" data-require-bs-version="5 5">
<div class="card-body bslib-gap-spacing html-fill-item html-fill-container" style="margin-top:auto;margin-bottom:auto;flex:1 1 auto; padding:0;">
<div class="value-box-grid html-fill-item" style="--bslib-grid-height:auto;--bslib-grid-height-mobile:auto;---bslib-value-box-showcase-w:30%;---bslib-value-box-showcase-w-fs:1fr;---bslib-value-box-showcase-max-h:100px;---bslib-value-box-showcase-max-h-fs:67%;">
<div class="value-box-showcase html-fill-item html-fill-container">
<i class="fas fa-otter" role="presentation" aria-label="otter icon"></i>
</div>
<div class="value-box-area html-fill-item html-fill-container">
<p class="value-box-title">How many otters?</p>
<div class="shiny-html-output value-box-value" id="OtterCount"></div>
detail
</div>
</div>
</div>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script>
</div>
</div>
</div>
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 16.7%;justify-content: center;">
<p>&nbsp;</p>
</div>
</div>
</div>
<div class="cell" data-context="server">

</div>
<div class="cell">
<details>
<summary>Server code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>output<span class="sc">$</span>OtterCount <span class="ot">&lt;-</span> <span class="fu">renderUI</span>({</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="st">"You've chosen "</span>, input<span class="sc">$</span>Slider, <span class="st">" otters"</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="adding-a-link-to-the-tab" class="level2">
<h2 class="anchored" data-anchor-id="adding-a-link-to-the-tab">Adding a link to the tab</h2>
<p>Next step is adding a link onto the value box. We can do this with an <a href="https://shiny.posit.co/r/reference/shiny/1.6.0/actionbutton"><code>actionLink()</code></a> which can go inside the value box (worth noting you can have several lines of “detail” code inside a value box).</p>
<p>Action links don’t need to live on a value box, they can be text anywhere on your dashboard (I’ve placed them at the top of each tab, so users can return to the homepage without needing the sidebar)</p>
<p>I also added some <code>css</code> to the action link function via the <code>style</code> argument to move the text over to the right and give it a bit of padding so it didn’t sit on the edge of the box.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">actionLink</span>(<span class="at">inputId =</span> <span class="st">"link_to_incidence"</span>, </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>           <span class="fu">p</span>(<span class="st">"explore metric "</span>, <span class="fu">icon</span>(<span class="st">'circle-chevron-right'</span>)),</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">style =</span> <span class="st">'text-align: right; padding: 5px; text-decoration: none; font-size: 15px'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>For this to work, we need to respond to it on the server side of things. Within an <code>observeEvent()</code> we can use <a href="https://www.rdocumentation.org/packages/shinydashboard/versions/0.7.2/topics/updateTabItems"><code>updateTabItems()</code></a> from the <code>shinydashboard</code> library. When clicked, this will change the active tab to the incidence tab</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">observeEvent</span>(input<span class="sc">$</span>link_to_incidence, {</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">updateTabItems</span>(<span class="at">session =</span> parent, <span class="st">"menu"</span>, <span class="at">selected =</span> <span class="st">"module_4_incidence"</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Its worth highlighting the session argument here. This is a value that is passed from the main <code>app.R</code> script through to the module script. So when I call my module, it looks like this:</p>
<div class="cell">
<details open="">
<summary>calling the server from app.R</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">module_4_incidence_TabServer</span>(<span class="at">id =</span> <span class="st">"module_4_incidence"</span>,</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>                             <span class="at">tabData =</span> inc_timeline,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">chosen_pcon =</span> chosen_pcon,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>                             <span class="at">ConType =</span> ConType,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>                             <span class="at">parent =</span> session)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details open="">
<summary>the server function in the module script</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>module_4_incidence_TabServer <span class="ot">&lt;-</span> <span class="cf">function</span>(id, tabData, chosen_pcon, ConType, parent) {</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">moduleServer</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    id,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">function</span>(input, output, session) {</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>      ...</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Truth be told, I don’t fully understand the <a href="https://shiny.posit.co/r/reference/shiny/1.7.0/session.html"><code>session</code></a> argument in <code>shiny</code> so I won’t try and explain it here. But without passing it between modules the link wont work.</p>
<p>The final piece to making the link work, relies on the <code>shinyjs</code> library. If you’ve scrolled halfway down a tab page and click the action link, then it changes tab but it doesn’t scroll back up to the top. To fix that, we can <code>observe()</code> the menu via <code>input$menu</code> and run some javascript every time the tab is changed that resets the window scroll. This needs to live in the main <code>app.R</code> server call.</p>
<div class="cell">
<details open="">
<summary>code to reset the scroll of the window</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">observe</span>({</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  input<span class="sc">$</span>menu</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  shinyjs<span class="sc">::</span><span class="fu">runjs</span>(<span class="st">"window.scrollTo(0, 0)"</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="optional-making-the-whole-value-box-clickable" class="level3">
<h3 class="anchored" data-anchor-id="optional-making-the-whole-value-box-clickable">Optional: making the whole value box clickable</h3>
<p>You can make whole elements clickable, which I did to the value boxes themselves.</p>
<p>When creating the value box, you can give it an <code>id</code> which helps shiny identify the whole value box element.</p>
<div class="cell">
<details open="">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">value_box</span>(<span class="at">id =</span> <span class="st">"otter_box"</span>,</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">title =</span> <span class="st">"The title"</span>,</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">value =</span> <span class="st">"The value"</span>,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">showcase =</span> <span class="fu">icon</span>(<span class="st">"otter"</span>),</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>          <span class="st">"detail"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>You can then refer to that id and ask shiny respond via the <code>onclick()</code> function which is also part of the <code>shinyjs</code> library.</p>
<div class="cell">
<details open="">
<summary>Place this in the server section of the page your value box is on</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">onclick</span>(<span class="st">"otter_box"</span>,</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">updateTabItems</span>(<span class="at">session =</span> parent, <span class="at">inputId =</span> <span class="st">"menu"</span>, <span class="at">selected =</span> <span class="st">"module_to_change_to"</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The downside of this method is it doesn’t make it clear that the element is clickable, i.e.&nbsp;the mouse pointer doesn’t turn into a pointing hand like it does over other links.</p>
</section>
</section>
<section id="styling-the-value-box" class="level2">
<h2 class="anchored" data-anchor-id="styling-the-value-box">Styling the value box</h2>
<p>There are lots of ways to re-style the value box to make it look <em>just right</em>. However, because there are many ways to do this, it can be a real pain.</p>
<p>Mostly I used css (and a <code>hr()</code> line) to go from this:</p>
<div id="Unstyled" class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 16.7%;justify-content: center;">
<p>&nbsp;</p>
</div>
<div class="cell quarto-layout-cell" style="flex-basis: 66.7%;justify-content: center;">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">value_box</span>(<span class="at">title =</span> <span class="st">"The title"</span>,</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">value =</span> <span class="st">"The value"</span>,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">showcase =</span> <span class="fu">icon</span>(<span class="st">"otter"</span>),</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>          <span class="st">"detail"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="card bslib-card bslib-mb-spacing html-fill-item html-fill-container bslib-value-box default showcase-left-center" data-bslib-card-init="" data-require-bs-caller="card() value_box()" data-require-bs-version="5 5">
<div class="card-body bslib-gap-spacing html-fill-item html-fill-container" style="margin-top:auto;margin-bottom:auto;flex:1 1 auto; padding:0;">
<div class="value-box-grid html-fill-item" style="--bslib-grid-height:auto;--bslib-grid-height-mobile:auto;---bslib-value-box-showcase-w:30%;---bslib-value-box-showcase-w-fs:1fr;---bslib-value-box-showcase-max-h:100px;---bslib-value-box-showcase-max-h-fs:67%;">
<div class="value-box-showcase html-fill-item html-fill-container">
<i class="fas fa-otter" role="presentation" aria-label="otter icon"></i>
</div>
<div class="value-box-area html-fill-item html-fill-container">
<p class="value-box-title">The title</p>
<p class="value-box-value">The value</p>
detail
</div>
</div>
</div>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script>
</div>
</div>
</div>
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 16.7%;justify-content: center;">
<p>&nbsp;</p>
</div>
</div>
</div>
<p>to this:</p>
<div id="StyledOtter" class="quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 16.7%;justify-content: center;">
<p>&nbsp;</p>
</div>
<div class="cell quarto-layout-cell" style="flex-basis: 66.7%;justify-content: center;">
<details>
<summary>the css I used</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>tags<span class="sc">$</span><span class="fu">style</span>(<span class="at">type =</span> <span class="st">"text/css"</span>,</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>          <span class="st">"</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="st">          /* round the corner of boxes on home tab */</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="st">            #stylish_otter .bslib-value-box {</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="st">              border-radius: 6px;</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="st">            }</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="st">          /*set font size of title in box on home tab*/</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="st">            #stylish_otter .bslib-value-box .value-box-title {</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="st">              font-size: 15px;</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="st">              font-family: Poppins, Arial Bold, Arial, sans-serif;</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="st">              margin-bottom: 5px;</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="st">            }</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="st">            /* set the font size of the value 8?</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="st">            #stylish_otter .bslib-value-box .value-box-value {</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="st">                font-size: 28px;</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="st">                font-family: Progress Medium, Arial Bold, Arial, sans-serif;</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a><span class="st">                margin-bottom: 5px;</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a><span class="st">            }</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a><span class="st">          /*icon colour for the otter */</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a><span class="st">          #stylish_otter .fa-otter {</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a><span class="st">              opacity: 1;</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a><span class="st">              color: #009cee;</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a><span class="st">              font-size: 3rem;</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a><span class="st">          }</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a><span class="st">          #stylish_otter .bslib-value-box .value-box-showcase .bi, .bslib-value-box .value-box-showcase .fa, .bslib-value-box .value-box-showcase .fab, .bslib-value-box .value-box-showcase .fas, .bslib {                </span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a><span class="st">                padding-left: 0px;</span></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a><span class="st">                padding-right: 10px;</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a><span class="st">                padding-top: 10px;</span></span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a><span class="st">                padding-bottom: 10px;</span></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a><span class="st">                margin-bottom: 5px;</span></span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a><span class="st">        }</span></span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a><span class="st">        </span></span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a><span class="st">          #stylish_otter a:link {</span></span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a><span class="st">           color: #009cee;</span></span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a><span class="st">          }</span></span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a><span class="st">         #stylish_otter a:hover {</span></span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a><span class="st">           color: #4dbaf3;</span></span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a><span class="st">         }</span></span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a><span class="st">          "</span></span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<style type="text/css">
          /* round the corner of boxes on home tab */
            #stylish_otter .bslib-value-box {
              border-radius: 6px;
            }
          /*set font size of title in box on home tab*/
            #stylish_otter .bslib-value-box .value-box-title {
              font-size: 15px;
              font-family: Poppins, Arial Bold, Arial, sans-serif;
              margin-bottom: 5px;
            }

            /* set the font size of the value 8?
            #stylish_otter .bslib-value-box .value-box-value {
                font-size: 28px;
                font-family: Progress Medium, Arial Bold, Arial, sans-serif;
                margin-bottom: 5px;
            }

          /*icon colour for the otter */
          #stylish_otter .fa-otter {
              opacity: 1;
              color: #009cee;
              font-size: 3rem;
          }

          #stylish_otter .bslib-value-box .value-box-showcase .bi, .bslib-value-box .value-box-showcase .fa, .bslib-value-box .value-box-showcase .fab, .bslib-value-box .value-box-showcase .fas, .bslib {                
                padding-left: 0px;
                padding-right: 10px;
                padding-top: 10px;
                padding-bottom: 10px;
                margin-bottom: 5px;
        }
        
          #stylish_otter a:link {
           color: #009cee;
          }

         #stylish_otter a:hover {
           color: #4dbaf3;
         }
          </style>
</div>
</div>
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 16.7%;justify-content: center;">
<p>&nbsp;</p>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 16.7%;justify-content: center;">
<p>&nbsp;</p>
</div>
<div class="cell quarto-layout-cell" style="flex-basis: 66.7%;justify-content: center;">
<details>
<summary>The complete value box</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">value_box</span>(<span class="at">id =</span> <span class="st">"stylish_otter"</span>,</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">title =</span> <span class="fu">p</span>(<span class="st">"Fancy value box"</span>,</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">hr</span>(<span class="at">style =</span> <span class="st">"width:100%; </span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="st">                     text-align:right; </span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="st">                     margin-left:5; </span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="st">                     border-top: 5px solid #000000; </span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="st">                     margin-top: 5px; </span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="st">                     margin-bottom: 10px;</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="st">                     opacity: 1;"</span>)),</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">value =</span> <span class="st">"The big otter"</span>,</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">showcase =</span> <span class="fu">icon</span>(<span class="st">"otter"</span>),</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>          <span class="st">"otter text"</span>,</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>          <span class="at">theme =</span> <span class="fu">value_box_theme</span>(<span class="at">bg =</span> <span class="st">"#f7f7f7"</span>, <span class="at">fg =</span> <span class="st">"#000000"</span>),</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>          <span class="at">class =</span> <span class="st">"border-0"</span>,</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>          <span class="fu">actionLink</span>(<span class="at">inputId =</span> <span class="st">"link_to_incidence"</span>, </span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>             <span class="fu">p</span>(<span class="st">"Link to otters"</span>, <span class="fu">icon</span>(<span class="st">'circle-chevron-right'</span>)),</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>             <span class="at">style =</span> <span class="st">'text-align: right; padding: 5px; text-decoration: none; font-size: 15px'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="card bslib-card bslib-mb-spacing bslib-card-input html-fill-item html-fill-container bslib-value-box border-0 showcase-left-center" data-bslib-card-init="" data-require-bs-caller="card() value_box()" data-require-bs-version="5 5" id="stylish_otter" style="color:#000000;background-color:#f7f7f7;--bslib-color-fg:#000000;--bslib-color-bg:#f7f7f7;">
<div class="card-body bslib-gap-spacing html-fill-item html-fill-container" style="margin-top:auto;margin-bottom:auto;flex:1 1 auto; padding:0;">
<div class="value-box-grid html-fill-item" style="--bslib-grid-height:auto;--bslib-grid-height-mobile:auto;---bslib-value-box-showcase-w:30%;---bslib-value-box-showcase-w-fs:1fr;---bslib-value-box-showcase-max-h:100px;---bslib-value-box-showcase-max-h-fs:67%;">
<div class="value-box-showcase html-fill-item html-fill-container">
<i class="fas fa-otter" role="presentation" aria-label="otter icon"></i>
</div>
<div class="value-box-area html-fill-item html-fill-container">
<p class="value-box-title">
Fancy value box
</p><hr style="width:100%; 
                     text-align:right; 
                     margin-left:5; 
                     border-top: 5px solid #000000; 
                     margin-top: 5px; 
                     margin-bottom: 10px;
                     opacity: 1;">
<p></p>
<p class="value-box-value">The big otter</p>
otter text
<a id="link_to_incidence" href="#" class="action-button" style="text-align: right; padding: 5px; text-decoration: none; font-size: 15px">
<p>
Link to otters
<i class="fas fa-circle-chevron-right" role="presentation" aria-label="circle-chevron-right icon"></i>
</p>
</a>
</div>
</div>
</div>
<script data-bslib-card-init="">bslib.Card.initializeAllCards();</script>
</div>
</div>
</div>
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 16.7%;justify-content: center;">
<p>&nbsp;</p>
</div>
</div>
</div>
<p>You can add this <code>css</code> in-line, or you can add it in a separate css file (I find this method tidier). If you want your css to only apply to one value box, the add the id of your value box before the <code>css</code> classes, so in this example <code>#stylish_otter</code> is before all the <code>css</code> classes.</p>
<p>I decided to add the <code>css</code> for the <code>hr()</code> directly in the function as an easier way of only changing this specific <code>hr</code> and not affecting all the others.</p>
<p>You can also use the <code>class</code> argument in <code>value_box()</code> as a short-cut for any predefined <code>bootstrap</code> <code>css</code> settings (I’ve used <code>"border-0"</code> to disable the border around the box).</p>
<p>I’ve also used the <code>theme</code> argument to set the background colour, and the foreground text colour.</p>
<p>
<script type="application/shiny-prerendered" data-context="server-start">
library(shiny)
library(shinydashboard)
library(bslib)
library(tidyverse)
library(readxl)


</script>
 
<script type="application/shiny-prerendered" data-context="data">
PCON <- read_csv("./Data/Westminster Constituency 2025 List.csv", 
                         show_col_types = FALSE)  %>%
  arrange(PCON25NM) %>%
  rename(`Future constituency` = PCON25NM) %>%
  select(`Future constituency`)

#setwd("~/cruk_ci_cross_pathway/Training and Tutorials/Using value boxes")
PCON25toSubICB22 <- read_xlsx("./Data/SubICB 2022 to Constituency 2025.xlsx")
PCON25toLAD22 <- read_xlsx("./Data/Local Authority District 2022 to Constituency 2025.xlsx")
PCON25toScotHB <- read_xlsx("./Data/Scotland Health Board 2019 to Constituency 2025.xlsx")
PCON25toHSCT <- read_xlsx("./Data/Northern Ireland Health and Social Care Trust 2017 to Constituency 2025.xlsx")

Inc_E <- read_xlsx("./Data/Incidence.xlsx", sheet = "ENG_Incidence")
Inc_S <- read_xlsx("./Data/Incidence.xlsx", sheet = "SCT_Incidence")
Inc_W <- read_xlsx("./Data/Incidence.xlsx", sheet = "WAL_Incidence")
Inc_N <- read_xlsx("./Data/Incidence.xlsx", sheet = "NIR_Incidence")
Data_inc <- rbind(Inc_E, Inc_S, Inc_W, Inc_N)
rm(Inc_E, Inc_S, Inc_W, Inc_N)

CRUKRoundingPerYear <- function(number){
  # number <- 10050000
  number <-  case_when(
    number >= 100000000 & number - floor(number / 1000000) * 1000000 == 500 ~ number + 1,
    number >= 100000000 ~ number,
    number >= 10000000  & number - floor(number / 100000)  * 100000  == 500 ~ number + 1,
    number >= 10000000  ~ number,
    number >= 1000000   & number - floor(number / 10000)   * 10000   == 500 ~ number + 1,
    number >= 1000000   ~ number,
    number >= 100000    & number - floor(number / 1000)    * 1000    == 500 ~ number + 1,
    number >= 100000    ~ number,
    number >= 10000     & number - floor(number / 100)     * 100     == 50  ~ number + 1,
    number >= 10000     ~ number,
    number >= 1000      & number - floor(number / 100)     * 100     == 50  ~ number + 1,
    number >= 1000      ~ number,
    number >= 100       & number - floor(number / 10)      * 10      == 5   ~ number + 0.01,
    number >= 100       ~ number,
    number >= 10        & number - floor(number / 1)       * 1       == 0.5 ~ number + 0.0001,
    number >= 10        ~ number,
    TRUE ~ number)
  
  numbertext <- case_when(
    number >= 100000000 & number - floor(number/1000000)*1000000 >= 900 ~
      paste0("around ", format(signif(number, digits = 3),
                               big.mark=",", scientific = FALSE)),
    number >= 100000000 & number - floor(number/1000000)*1000000 >= 700 ~
      paste0("nearly ", format(signif(number, digits = 3),
                               big.mark=",", scientific = FALSE)),
    number >= 100000000 & number - floor(number/1000000)*1000000 >= 200 ~
      paste0("more than ", format(signif(floor(number/100000)*100000, digits = 3),
                                  big.mark=",", scientific = FALSE)),
    number >= 100000000 ~
      paste0("around ",    format(signif(floor(number/100000)*100000, digits = 3),
                                  big.mark=",", scientific = FALSE)),
    
    number >= 10000000 & number - floor(number/100000)*100000 >= 900 ~
      paste0("around ", format(signif(number, digits = 3),
                               big.mark=",", scientific = FALSE)),
    number >= 10000000 & number - floor(number/100000)*100000 >= 700 ~
      paste0("nearly ", format(signif(number, digits = 3), 
                               big.mark=",", scientific = FALSE)),
    number >= 10000000 & number - floor(number/100000)*100000 >= 200 ~
      paste0("more than ", format(signif(floor(number/100000)*100000, digits = 3),
                                  big.mark=",", scientific = FALSE)),
    number >= 10000000 ~
      paste0("around ", format(signif(floor(number/100000)*100000, digits = 3),
                               big.mark=",", scientific = FALSE)),
    
    number >= 1000000 & number - floor(number/10000)*10000 >= 900 ~
      paste0("around ", format(signif(number, digits = 3), 
                               big.mark=",", scientific = FALSE)),
    number >= 1000000 & number - floor(number/10000)*10000 >= 700 ~
      paste0("nearly ", format(signif(number, digits = 3), 
                               big.mark=",", scientific = FALSE)),
    number >= 1000000 & number - floor(number/10000)*10000 >= 200 ~
      paste0("more than ", format(signif(floor(number/10000)*10000, digits = 3),
                                  big.mark=",", scientific = FALSE)),
    number >= 1000000 ~
      paste0("around ", format(signif(floor(number/10000)*10000, digits = 3),
                               big.mark=",", scientific = FALSE)),
    
    number >= 100000 & number - floor(number/1000)*1000 >= 900 ~
      paste0("around ", format(signif(number, digits = 3),
                               big.mark=",", scientific = FALSE)),
    number >= 100000 & number - floor(number/1000)*1000 >= 700 ~
      paste0("nearly ", format(signif(number, digits = 3),
                               big.mark=",", scientific = FALSE)),
    number >= 100000 & number - floor(number/1000)*1000 >= 200 ~ 
      paste0("more than ", format(signif(floor(number/1000)*1000, digits = 3),
                                  big.mark=",", scientific = FALSE)),
    number >= 100000 ~
      paste0("around ", format(signif(floor(number/1000)*1000, digits = 3),
                               big.mark=",", scientific = FALSE)),
    
    number >= 10000 ~
      paste0("around ", format((round(number/100, 0)*100), big.mark=",")),
    
    number >= 1000 ~
      paste0("around ", format((round(number/100, 0)*100), big.mark=",")),
    
    number >= 100 ~
      paste0("around ", round(number/10, 0)*10),
    
    number >= 10 ~ 
      paste0("around ", round(number/5, 0)*5),
    
    number >= 7.5 ~
      paste0("around 10"),
    
    number >= 5 ~
      paste0("around 5"),
    
    TRUE ~
      paste0("less than 5"))
  
  return(numbertext)
}
</script>
 
<script type="application/shiny-prerendered" data-context="server">
#Reactive variable storing the selection box input
chosen_pcon <- reactive({
  input$select_conList
})

output$IncConValue <- renderUI({
  #Check if a constituency is selected, function will stop if not.
  validate(need(chosen_pcon(), ''))
  mapping <- rbind(PCON25toSubICB22, 
                   PCON25toLAD22 %>% filter(Country == "Wales"), 
                   PCON25toScotHB, 
                   PCON25toHSCT) %>%
    filter(PCON25NM == chosen_pcon())
  
  Constituency <- filter(Data_inc, AreaCode %in% mapping$AreaCode)
  
  #Aggregate constituency info into a single record
  Statement <- Constituency %>%
    transmute(
      Country = Country,
      YearRange = YearRange,
      ConCases = sum(AvgNumberOfCases),
      CountryIncidence = CountryIncidence,
      AreaType = AreaType
    )
  Statement <- Statement[1,]
  shiny::p(paste0(CRUKRoundingPerYear(Statement$ConCases)),
           style = 'font-family: Progress Medium, Poppins, Arial Bold, Arial, sans-serif;')
})


output$IncConDetail <- renderUI({
  validate(need(chosen_pcon(), ''))
  
  shiny::p(paste0("new cancer cases every year"))
})

# observeEvent(input$link_to_incidence, {
#   updateTabItems(session = parent, "menu", selected = "module_4_incidence")
# })
# 
# onclick("incidence_VB",
#         updateTabItems(session = parent, "menu", selected = "module_4_incidence")
# )

# observe({
#   input$menu
#   shinyjs::runjs("window.scrollTo(0, 0)")
# })
</script>
 
<script type="application/shiny-prerendered" data-context="server">
output$OtterCount <- renderUI({
  paste0("You've chosen ", input$Slider, " otters")
})
</script>
 
<script type="application/shiny-prerendered" data-context="server-extras">
ojs_define <- function(..., .session = shiny::getDefaultReactiveDomain()) {
  quos <- rlang::enquos(...)
  vars <- rlang::list2(...)
  nm <- names(vars)
  if (is.null(nm)) {
    nm <- rep_len("", length(vars))
  }
  mapply(function(q, nm, val) {
    # Infer name, if possible
    if (nm == "") {
      tryCatch({
        nm <- rlang::as_name(q)
      }, error = function(e) {
        code <- paste(collapse = "\n", deparse(rlang::f_rhs(q)))
        stop("ojs_define() could not create a name for the argument: ", code)
      })
    }
    .session$output[[nm]] <- val
    outputOptions(.session$output, nm, suspendWhenHidden = FALSE)
    .session$sendCustomMessage("ojs-export", list(name = nm))
    NULL
  }, quos, nm, vars, SIMPLIFY = FALSE, USE.NAMES = FALSE)
  invisible()
}
</script>
</p>
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["selectize"]},{"type":"character","attributes":{},"value":["0.15.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared/selectize"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/selectize.min.js","accessibility/js/selectize-plugin-a11y.min.js"]},{"type":"character","attributes":{},"value":["css/selectize.bootstrap3.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.9.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["font-awesome"]},{"type":"character","attributes":{},"value":["6.4.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fontawesome"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/all.min.css","css/v4-shims.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fontawesome"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.2"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmltools-fill"]},{"type":"character","attributes":{},"value":["0.5.8.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fill"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fill.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmltools"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.8.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bslib-component-js"]},{"type":"character","attributes":{},"value":["0.8.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["components/dist"]}]},{"type":"NULL"},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["src"]}},"value":[{"type":"character","attributes":{},"value":["components.min.js"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["src","type"]}},"value":[{"type":"character","attributes":{},"value":["web-components.min.js"]},{"type":"character","attributes":{},"value":["module"]}]}]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["bslib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.8.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bslib-component-css"]},{"type":"character","attributes":{},"value":["0.8.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["components/dist"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["components.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["bslib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.8.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bslib-tag-require"]},{"type":"character","attributes":{},"value":["0.8.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["components"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tag-require.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["bslib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.8.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["font-awesome"]},{"type":"character","attributes":{},"value":["6.4.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fontawesome"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/all.min.css","css/v4-shims.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fontawesome"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.2"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmltools-fill"]},{"type":"character","attributes":{},"value":["0.5.8.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fill"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fill.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmltools"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.8.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bslib-component-js"]},{"type":"character","attributes":{},"value":["0.8.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["components/dist"]}]},{"type":"NULL"},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["src"]}},"value":[{"type":"character","attributes":{},"value":["components.min.js"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["src","type"]}},"value":[{"type":"character","attributes":{},"value":["web-components.min.js"]},{"type":"character","attributes":{},"value":["module"]}]}]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["bslib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.8.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bslib-component-css"]},{"type":"character","attributes":{},"value":["0.8.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["components/dist"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["components.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["bslib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.8.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bslib-tag-require"]},{"type":"character","attributes":{},"value":["0.8.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["components"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tag-require.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["bslib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.8.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ionrangeslider-javascript"]},{"type":"character","attributes":{},"value":["2.3.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared/ionrangeslider"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/ion.rangeSlider.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.9.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["strftime"]},{"type":"character","attributes":{},"value":["0.9.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared/strftime"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["strftime-min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.9.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ionrangeslider-css"]},{"type":"character","attributes":{},"value":["2.3.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared/ionrangeslider"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/ion.rangeSlider.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.9.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["font-awesome"]},{"type":"character","attributes":{},"value":["6.4.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fontawesome"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/all.min.css","css/v4-shims.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fontawesome"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.2"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmltools-fill"]},{"type":"character","attributes":{},"value":["0.5.8.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fill"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fill.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmltools"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.8.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bslib-component-js"]},{"type":"character","attributes":{},"value":["0.8.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["components/dist"]}]},{"type":"NULL"},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["src"]}},"value":[{"type":"character","attributes":{},"value":["components.min.js"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["src","type"]}},"value":[{"type":"character","attributes":{},"value":["web-components.min.js"]},{"type":"character","attributes":{},"value":["module"]}]}]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["bslib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.8.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bslib-component-css"]},{"type":"character","attributes":{},"value":["0.8.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["components/dist"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["components.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["bslib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.8.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bslib-tag-require"]},{"type":"character","attributes":{},"value":["0.8.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["components"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tag-require.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["bslib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.8.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["font-awesome"]},{"type":"character","attributes":{},"value":["6.4.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fontawesome"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/all.min.css","css/v4-shims.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fontawesome"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.2"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmltools-fill"]},{"type":"character","attributes":{},"value":["0.5.8.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fill"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fill.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmltools"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.8.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bslib-component-js"]},{"type":"character","attributes":{},"value":["0.8.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["components/dist"]}]},{"type":"NULL"},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["src"]}},"value":[{"type":"character","attributes":{},"value":["components.min.js"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["src","type"]}},"value":[{"type":"character","attributes":{},"value":["web-components.min.js"]},{"type":"character","attributes":{},"value":["module"]}]}]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["bslib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.8.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bslib-component-css"]},{"type":"character","attributes":{},"value":["0.8.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["components/dist"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["components.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["bslib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.8.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bslib-tag-require"]},{"type":"character","attributes":{},"value":["0.8.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["components"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tag-require.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["bslib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.8.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["font-awesome"]},{"type":"character","attributes":{},"value":["6.4.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fontawesome"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/all.min.css","css/v4-shims.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fontawesome"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.2"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmltools-fill"]},{"type":"character","attributes":{},"value":["0.5.8.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fill"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fill.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmltools"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.8.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bslib-component-js"]},{"type":"character","attributes":{},"value":["0.8.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["components/dist"]}]},{"type":"NULL"},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["src"]}},"value":[{"type":"character","attributes":{},"value":["components.min.js"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["src","type"]}},"value":[{"type":"character","attributes":{},"value":["web-components.min.js"]},{"type":"character","attributes":{},"value":["module"]}]}]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["bslib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.8.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bslib-component-css"]},{"type":"character","attributes":{},"value":["0.8.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["components/dist"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["components.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["bslib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.8.0"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bslib-tag-require"]},{"type":"character","attributes":{},"value":["0.8.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["components"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tag-require.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["bslib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.8.0"]}]}]}
</script>
<!--/html_preserve-->
<!--html_preserve-->

<script type="application/shiny-prerendered" data-context="execution_dependencies">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages","version"]},"class":{"type":"character","attributes":{},"value":["data.frame"]},"row.names":{"type":"integer","attributes":{},"value":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75]}},"value":[{"type":"character","attributes":{},"value":["archive","base","bit","bit64","bslib","cachem","cellranger","cli","colorspace","compiler","crayon","datasets","digest","dplyr","evaluate","fansi","fastmap","fontawesome","forcats","generics","ggplot2","glue","graphics","grDevices","grid","gtable","hms","htmltools","htmlwidgets","httpuv","jquerylib","jsonlite","knitr","later","lifecycle","lubridate","magrittr","memoise","methods","mime","munsell","parallel","pillar","pkgconfig","promises","purrr","R6","Rcpp","readr","readxl","rlang","rmarkdown","rstudioapi","sass","scales","shiny","shinydashboard","stats","stringi","stringr","tibble","tidyr","tidyselect","tidyverse","timechange","tools","tzdb","utf8","utils","vctrs","vroom","withr","xfun","xtable","yaml"]},{"type":"character","attributes":{},"value":["1.1.9","4.3.1","4.5.0","4.5.2","0.8.0","1.1.0","1.1.0","3.6.2","2.1-1","4.3.1","1.5.3","4.3.1","0.6.37","1.1.4","1.0.0","1.0.6","1.2.0","0.5.2","1.0.0","0.1.3","3.5.1","1.7.0","4.3.1","4.3.1","4.3.1","0.3.5","1.1.3","0.5.8.1","1.6.4","1.6.15","0.1.4","1.8.9","1.48","1.3.2","1.0.4","1.9.3","2.0.3","2.0.1","4.3.1","0.12","0.5.1","4.3.1","1.9.0","2.0.3","1.3.0","1.0.2","2.5.1","1.0.13","2.1.5","1.4.3","1.1.4","2.28","0.16.0","0.4.9","1.3.0","1.9.1","0.7.2","4.3.1","1.8.4","1.5.1","3.2.1","1.3.1","1.2.1","2.0.0","0.3.0","4.3.1","0.4.0","1.2.4","4.3.1","0.6.5","1.6.5","3.0.1","0.47","1.8-4","2.3.10"]}]}]}
</script>
<!--/html_preserve-->
<!-- -->

</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb15" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="an">Title:</span><span class="co"> "Using (and styling) bslib value boxes"</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co">    mainfont: Poppins</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co">    scrolling: true</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="an">server:</span><span class="co"> shiny</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span><span class="co"> </span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co">  warning: false</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co">  echo: true</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="an">knitr:</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="co">  opts_knit:</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="co">    root.dir: "~/cruk_ci_cross_pathway/Training and Tutorials/Using value boxes"</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="fu"># Clickable value boxes in shiny</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a><span class="in">```{r libraries}</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a><span class="co">#| context: setup</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Libraries used in this tutorial"</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shinydashboard)</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bslib)</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a><span class="in">```{r data}</span></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a><span class="co">#| context: data</span></span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>PCON <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"./Data/Westminster Constituency 2025 List.csv"</span>, </span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>                         <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)  <span class="sc">%&gt;%</span></span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(PCON25NM) <span class="sc">%&gt;%</span></span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">`</span><span class="at">Future constituency</span><span class="st">`</span> <span class="ot">=</span> PCON25NM) <span class="sc">%&gt;%</span></span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">`</span><span class="at">Future constituency</span><span class="st">`</span>)</span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a><span class="co">#setwd("~/cruk_ci_cross_pathway/Training and Tutorials/Using value boxes")</span></span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a>PCON25toSubICB22 <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"./Data/SubICB 2022 to Constituency 2025.xlsx"</span>)</span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a>PCON25toLAD22 <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"./Data/Local Authority District 2022 to Constituency 2025.xlsx"</span>)</span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a>PCON25toScotHB <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"./Data/Scotland Health Board 2019 to Constituency 2025.xlsx"</span>)</span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a>PCON25toHSCT <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"./Data/Northern Ireland Health and Social Care Trust 2017 to Constituency 2025.xlsx"</span>)</span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a>Inc_E <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"./Data/Incidence.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"ENG_Incidence"</span>)</span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a>Inc_S <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"./Data/Incidence.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"SCT_Incidence"</span>)</span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a>Inc_W <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"./Data/Incidence.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"WAL_Incidence"</span>)</span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a>Inc_N <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"./Data/Incidence.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"NIR_Incidence"</span>)</span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a>Data_inc <span class="ot">&lt;-</span> <span class="fu">rbind</span>(Inc_E, Inc_S, Inc_W, Inc_N)</span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(Inc_E, Inc_S, Inc_W, Inc_N)</span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-57"><a href="#cb15-57" aria-hidden="true" tabindex="-1"></a>CRUKRoundingPerYear <span class="ot">&lt;-</span> <span class="cf">function</span>(number){</span>
<span id="cb15-58"><a href="#cb15-58" aria-hidden="true" tabindex="-1"></a>  <span class="co"># number &lt;- 10050000</span></span>
<span id="cb15-59"><a href="#cb15-59" aria-hidden="true" tabindex="-1"></a>  number <span class="ot">&lt;-</span>  <span class="fu">case_when</span>(</span>
<span id="cb15-60"><a href="#cb15-60" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">100000000</span> <span class="sc">&amp;</span> number <span class="sc">-</span> <span class="fu">floor</span>(number <span class="sc">/</span> <span class="dv">1000000</span>) <span class="sc">*</span> <span class="dv">1000000</span> <span class="sc">==</span> <span class="dv">500</span> <span class="sc">~</span> number <span class="sc">+</span> <span class="dv">1</span>,</span>
<span id="cb15-61"><a href="#cb15-61" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">100000000</span> <span class="sc">~</span> number,</span>
<span id="cb15-62"><a href="#cb15-62" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">10000000</span>  <span class="sc">&amp;</span> number <span class="sc">-</span> <span class="fu">floor</span>(number <span class="sc">/</span> <span class="dv">100000</span>)  <span class="sc">*</span> <span class="dv">100000</span>  <span class="sc">==</span> <span class="dv">500</span> <span class="sc">~</span> number <span class="sc">+</span> <span class="dv">1</span>,</span>
<span id="cb15-63"><a href="#cb15-63" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">10000000</span>  <span class="sc">~</span> number,</span>
<span id="cb15-64"><a href="#cb15-64" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">1000000</span>   <span class="sc">&amp;</span> number <span class="sc">-</span> <span class="fu">floor</span>(number <span class="sc">/</span> <span class="dv">10000</span>)   <span class="sc">*</span> <span class="dv">10000</span>   <span class="sc">==</span> <span class="dv">500</span> <span class="sc">~</span> number <span class="sc">+</span> <span class="dv">1</span>,</span>
<span id="cb15-65"><a href="#cb15-65" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">1000000</span>   <span class="sc">~</span> number,</span>
<span id="cb15-66"><a href="#cb15-66" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">100000</span>    <span class="sc">&amp;</span> number <span class="sc">-</span> <span class="fu">floor</span>(number <span class="sc">/</span> <span class="dv">1000</span>)    <span class="sc">*</span> <span class="dv">1000</span>    <span class="sc">==</span> <span class="dv">500</span> <span class="sc">~</span> number <span class="sc">+</span> <span class="dv">1</span>,</span>
<span id="cb15-67"><a href="#cb15-67" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">100000</span>    <span class="sc">~</span> number,</span>
<span id="cb15-68"><a href="#cb15-68" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">10000</span>     <span class="sc">&amp;</span> number <span class="sc">-</span> <span class="fu">floor</span>(number <span class="sc">/</span> <span class="dv">100</span>)     <span class="sc">*</span> <span class="dv">100</span>     <span class="sc">==</span> <span class="dv">50</span>  <span class="sc">~</span> number <span class="sc">+</span> <span class="dv">1</span>,</span>
<span id="cb15-69"><a href="#cb15-69" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">10000</span>     <span class="sc">~</span> number,</span>
<span id="cb15-70"><a href="#cb15-70" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">1000</span>      <span class="sc">&amp;</span> number <span class="sc">-</span> <span class="fu">floor</span>(number <span class="sc">/</span> <span class="dv">100</span>)     <span class="sc">*</span> <span class="dv">100</span>     <span class="sc">==</span> <span class="dv">50</span>  <span class="sc">~</span> number <span class="sc">+</span> <span class="dv">1</span>,</span>
<span id="cb15-71"><a href="#cb15-71" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">1000</span>      <span class="sc">~</span> number,</span>
<span id="cb15-72"><a href="#cb15-72" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">100</span>       <span class="sc">&amp;</span> number <span class="sc">-</span> <span class="fu">floor</span>(number <span class="sc">/</span> <span class="dv">10</span>)      <span class="sc">*</span> <span class="dv">10</span>      <span class="sc">==</span> <span class="dv">5</span>   <span class="sc">~</span> number <span class="sc">+</span> <span class="fl">0.01</span>,</span>
<span id="cb15-73"><a href="#cb15-73" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">100</span>       <span class="sc">~</span> number,</span>
<span id="cb15-74"><a href="#cb15-74" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">10</span>        <span class="sc">&amp;</span> number <span class="sc">-</span> <span class="fu">floor</span>(number <span class="sc">/</span> <span class="dv">1</span>)       <span class="sc">*</span> <span class="dv">1</span>       <span class="sc">==</span> <span class="fl">0.5</span> <span class="sc">~</span> number <span class="sc">+</span> <span class="fl">0.0001</span>,</span>
<span id="cb15-75"><a href="#cb15-75" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">10</span>        <span class="sc">~</span> number,</span>
<span id="cb15-76"><a href="#cb15-76" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> number)</span>
<span id="cb15-77"><a href="#cb15-77" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-78"><a href="#cb15-78" aria-hidden="true" tabindex="-1"></a>  numbertext <span class="ot">&lt;-</span> <span class="fu">case_when</span>(</span>
<span id="cb15-79"><a href="#cb15-79" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">100000000</span> <span class="sc">&amp;</span> number <span class="sc">-</span> <span class="fu">floor</span>(number<span class="sc">/</span><span class="dv">1000000</span>)<span class="sc">*</span><span class="dv">1000000</span> <span class="sc">&gt;=</span> <span class="dv">900</span> <span class="sc">~</span></span>
<span id="cb15-80"><a href="#cb15-80" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"around "</span>, <span class="fu">format</span>(<span class="fu">signif</span>(number, <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb15-81"><a href="#cb15-81" aria-hidden="true" tabindex="-1"></a>                               <span class="at">big.mark=</span><span class="st">","</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>)),</span>
<span id="cb15-82"><a href="#cb15-82" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">100000000</span> <span class="sc">&amp;</span> number <span class="sc">-</span> <span class="fu">floor</span>(number<span class="sc">/</span><span class="dv">1000000</span>)<span class="sc">*</span><span class="dv">1000000</span> <span class="sc">&gt;=</span> <span class="dv">700</span> <span class="sc">~</span></span>
<span id="cb15-83"><a href="#cb15-83" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"nearly "</span>, <span class="fu">format</span>(<span class="fu">signif</span>(number, <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb15-84"><a href="#cb15-84" aria-hidden="true" tabindex="-1"></a>                               <span class="at">big.mark=</span><span class="st">","</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>)),</span>
<span id="cb15-85"><a href="#cb15-85" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">100000000</span> <span class="sc">&amp;</span> number <span class="sc">-</span> <span class="fu">floor</span>(number<span class="sc">/</span><span class="dv">1000000</span>)<span class="sc">*</span><span class="dv">1000000</span> <span class="sc">&gt;=</span> <span class="dv">200</span> <span class="sc">~</span></span>
<span id="cb15-86"><a href="#cb15-86" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"more than "</span>, <span class="fu">format</span>(<span class="fu">signif</span>(<span class="fu">floor</span>(number<span class="sc">/</span><span class="dv">100000</span>)<span class="sc">*</span><span class="dv">100000</span>, <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb15-87"><a href="#cb15-87" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">big.mark=</span><span class="st">","</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>)),</span>
<span id="cb15-88"><a href="#cb15-88" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">100000000</span> <span class="sc">~</span></span>
<span id="cb15-89"><a href="#cb15-89" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"around "</span>,    <span class="fu">format</span>(<span class="fu">signif</span>(<span class="fu">floor</span>(number<span class="sc">/</span><span class="dv">100000</span>)<span class="sc">*</span><span class="dv">100000</span>, <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb15-90"><a href="#cb15-90" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">big.mark=</span><span class="st">","</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>)),</span>
<span id="cb15-91"><a href="#cb15-91" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-92"><a href="#cb15-92" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">10000000</span> <span class="sc">&amp;</span> number <span class="sc">-</span> <span class="fu">floor</span>(number<span class="sc">/</span><span class="dv">100000</span>)<span class="sc">*</span><span class="dv">100000</span> <span class="sc">&gt;=</span> <span class="dv">900</span> <span class="sc">~</span></span>
<span id="cb15-93"><a href="#cb15-93" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"around "</span>, <span class="fu">format</span>(<span class="fu">signif</span>(number, <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb15-94"><a href="#cb15-94" aria-hidden="true" tabindex="-1"></a>                               <span class="at">big.mark=</span><span class="st">","</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>)),</span>
<span id="cb15-95"><a href="#cb15-95" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">10000000</span> <span class="sc">&amp;</span> number <span class="sc">-</span> <span class="fu">floor</span>(number<span class="sc">/</span><span class="dv">100000</span>)<span class="sc">*</span><span class="dv">100000</span> <span class="sc">&gt;=</span> <span class="dv">700</span> <span class="sc">~</span></span>
<span id="cb15-96"><a href="#cb15-96" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"nearly "</span>, <span class="fu">format</span>(<span class="fu">signif</span>(number, <span class="at">digits =</span> <span class="dv">3</span>), </span>
<span id="cb15-97"><a href="#cb15-97" aria-hidden="true" tabindex="-1"></a>                               <span class="at">big.mark=</span><span class="st">","</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>)),</span>
<span id="cb15-98"><a href="#cb15-98" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">10000000</span> <span class="sc">&amp;</span> number <span class="sc">-</span> <span class="fu">floor</span>(number<span class="sc">/</span><span class="dv">100000</span>)<span class="sc">*</span><span class="dv">100000</span> <span class="sc">&gt;=</span> <span class="dv">200</span> <span class="sc">~</span></span>
<span id="cb15-99"><a href="#cb15-99" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"more than "</span>, <span class="fu">format</span>(<span class="fu">signif</span>(<span class="fu">floor</span>(number<span class="sc">/</span><span class="dv">100000</span>)<span class="sc">*</span><span class="dv">100000</span>, <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb15-100"><a href="#cb15-100" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">big.mark=</span><span class="st">","</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>)),</span>
<span id="cb15-101"><a href="#cb15-101" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">10000000</span> <span class="sc">~</span></span>
<span id="cb15-102"><a href="#cb15-102" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"around "</span>, <span class="fu">format</span>(<span class="fu">signif</span>(<span class="fu">floor</span>(number<span class="sc">/</span><span class="dv">100000</span>)<span class="sc">*</span><span class="dv">100000</span>, <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb15-103"><a href="#cb15-103" aria-hidden="true" tabindex="-1"></a>                               <span class="at">big.mark=</span><span class="st">","</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>)),</span>
<span id="cb15-104"><a href="#cb15-104" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-105"><a href="#cb15-105" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">1000000</span> <span class="sc">&amp;</span> number <span class="sc">-</span> <span class="fu">floor</span>(number<span class="sc">/</span><span class="dv">10000</span>)<span class="sc">*</span><span class="dv">10000</span> <span class="sc">&gt;=</span> <span class="dv">900</span> <span class="sc">~</span></span>
<span id="cb15-106"><a href="#cb15-106" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"around "</span>, <span class="fu">format</span>(<span class="fu">signif</span>(number, <span class="at">digits =</span> <span class="dv">3</span>), </span>
<span id="cb15-107"><a href="#cb15-107" aria-hidden="true" tabindex="-1"></a>                               <span class="at">big.mark=</span><span class="st">","</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>)),</span>
<span id="cb15-108"><a href="#cb15-108" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">1000000</span> <span class="sc">&amp;</span> number <span class="sc">-</span> <span class="fu">floor</span>(number<span class="sc">/</span><span class="dv">10000</span>)<span class="sc">*</span><span class="dv">10000</span> <span class="sc">&gt;=</span> <span class="dv">700</span> <span class="sc">~</span></span>
<span id="cb15-109"><a href="#cb15-109" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"nearly "</span>, <span class="fu">format</span>(<span class="fu">signif</span>(number, <span class="at">digits =</span> <span class="dv">3</span>), </span>
<span id="cb15-110"><a href="#cb15-110" aria-hidden="true" tabindex="-1"></a>                               <span class="at">big.mark=</span><span class="st">","</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>)),</span>
<span id="cb15-111"><a href="#cb15-111" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">1000000</span> <span class="sc">&amp;</span> number <span class="sc">-</span> <span class="fu">floor</span>(number<span class="sc">/</span><span class="dv">10000</span>)<span class="sc">*</span><span class="dv">10000</span> <span class="sc">&gt;=</span> <span class="dv">200</span> <span class="sc">~</span></span>
<span id="cb15-112"><a href="#cb15-112" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"more than "</span>, <span class="fu">format</span>(<span class="fu">signif</span>(<span class="fu">floor</span>(number<span class="sc">/</span><span class="dv">10000</span>)<span class="sc">*</span><span class="dv">10000</span>, <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb15-113"><a href="#cb15-113" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">big.mark=</span><span class="st">","</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>)),</span>
<span id="cb15-114"><a href="#cb15-114" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">1000000</span> <span class="sc">~</span></span>
<span id="cb15-115"><a href="#cb15-115" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"around "</span>, <span class="fu">format</span>(<span class="fu">signif</span>(<span class="fu">floor</span>(number<span class="sc">/</span><span class="dv">10000</span>)<span class="sc">*</span><span class="dv">10000</span>, <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb15-116"><a href="#cb15-116" aria-hidden="true" tabindex="-1"></a>                               <span class="at">big.mark=</span><span class="st">","</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>)),</span>
<span id="cb15-117"><a href="#cb15-117" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-118"><a href="#cb15-118" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">100000</span> <span class="sc">&amp;</span> number <span class="sc">-</span> <span class="fu">floor</span>(number<span class="sc">/</span><span class="dv">1000</span>)<span class="sc">*</span><span class="dv">1000</span> <span class="sc">&gt;=</span> <span class="dv">900</span> <span class="sc">~</span></span>
<span id="cb15-119"><a href="#cb15-119" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"around "</span>, <span class="fu">format</span>(<span class="fu">signif</span>(number, <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb15-120"><a href="#cb15-120" aria-hidden="true" tabindex="-1"></a>                               <span class="at">big.mark=</span><span class="st">","</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>)),</span>
<span id="cb15-121"><a href="#cb15-121" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">100000</span> <span class="sc">&amp;</span> number <span class="sc">-</span> <span class="fu">floor</span>(number<span class="sc">/</span><span class="dv">1000</span>)<span class="sc">*</span><span class="dv">1000</span> <span class="sc">&gt;=</span> <span class="dv">700</span> <span class="sc">~</span></span>
<span id="cb15-122"><a href="#cb15-122" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"nearly "</span>, <span class="fu">format</span>(<span class="fu">signif</span>(number, <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb15-123"><a href="#cb15-123" aria-hidden="true" tabindex="-1"></a>                               <span class="at">big.mark=</span><span class="st">","</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>)),</span>
<span id="cb15-124"><a href="#cb15-124" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">100000</span> <span class="sc">&amp;</span> number <span class="sc">-</span> <span class="fu">floor</span>(number<span class="sc">/</span><span class="dv">1000</span>)<span class="sc">*</span><span class="dv">1000</span> <span class="sc">&gt;=</span> <span class="dv">200</span> <span class="sc">~</span> </span>
<span id="cb15-125"><a href="#cb15-125" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"more than "</span>, <span class="fu">format</span>(<span class="fu">signif</span>(<span class="fu">floor</span>(number<span class="sc">/</span><span class="dv">1000</span>)<span class="sc">*</span><span class="dv">1000</span>, <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb15-126"><a href="#cb15-126" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">big.mark=</span><span class="st">","</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>)),</span>
<span id="cb15-127"><a href="#cb15-127" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">100000</span> <span class="sc">~</span></span>
<span id="cb15-128"><a href="#cb15-128" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"around "</span>, <span class="fu">format</span>(<span class="fu">signif</span>(<span class="fu">floor</span>(number<span class="sc">/</span><span class="dv">1000</span>)<span class="sc">*</span><span class="dv">1000</span>, <span class="at">digits =</span> <span class="dv">3</span>),</span>
<span id="cb15-129"><a href="#cb15-129" aria-hidden="true" tabindex="-1"></a>                               <span class="at">big.mark=</span><span class="st">","</span>, <span class="at">scientific =</span> <span class="cn">FALSE</span>)),</span>
<span id="cb15-130"><a href="#cb15-130" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-131"><a href="#cb15-131" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">10000</span> <span class="sc">~</span></span>
<span id="cb15-132"><a href="#cb15-132" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"around "</span>, <span class="fu">format</span>((<span class="fu">round</span>(number<span class="sc">/</span><span class="dv">100</span>, <span class="dv">0</span>)<span class="sc">*</span><span class="dv">100</span>), <span class="at">big.mark=</span><span class="st">","</span>)),</span>
<span id="cb15-133"><a href="#cb15-133" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-134"><a href="#cb15-134" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">1000</span> <span class="sc">~</span></span>
<span id="cb15-135"><a href="#cb15-135" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"around "</span>, <span class="fu">format</span>((<span class="fu">round</span>(number<span class="sc">/</span><span class="dv">100</span>, <span class="dv">0</span>)<span class="sc">*</span><span class="dv">100</span>), <span class="at">big.mark=</span><span class="st">","</span>)),</span>
<span id="cb15-136"><a href="#cb15-136" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-137"><a href="#cb15-137" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">100</span> <span class="sc">~</span></span>
<span id="cb15-138"><a href="#cb15-138" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"around "</span>, <span class="fu">round</span>(number<span class="sc">/</span><span class="dv">10</span>, <span class="dv">0</span>)<span class="sc">*</span><span class="dv">10</span>),</span>
<span id="cb15-139"><a href="#cb15-139" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-140"><a href="#cb15-140" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">10</span> <span class="sc">~</span> </span>
<span id="cb15-141"><a href="#cb15-141" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"around "</span>, <span class="fu">round</span>(number<span class="sc">/</span><span class="dv">5</span>, <span class="dv">0</span>)<span class="sc">*</span><span class="dv">5</span>),</span>
<span id="cb15-142"><a href="#cb15-142" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-143"><a href="#cb15-143" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="fl">7.5</span> <span class="sc">~</span></span>
<span id="cb15-144"><a href="#cb15-144" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"around 10"</span>),</span>
<span id="cb15-145"><a href="#cb15-145" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-146"><a href="#cb15-146" aria-hidden="true" tabindex="-1"></a>    number <span class="sc">&gt;=</span> <span class="dv">5</span> <span class="sc">~</span></span>
<span id="cb15-147"><a href="#cb15-147" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"around 5"</span>),</span>
<span id="cb15-148"><a href="#cb15-148" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-149"><a href="#cb15-149" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span></span>
<span id="cb15-150"><a href="#cb15-150" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"less than 5"</span>))</span>
<span id="cb15-151"><a href="#cb15-151" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-152"><a href="#cb15-152" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(numbertext)</span>
<span id="cb15-153"><a href="#cb15-153" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-154"><a href="#cb15-154" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-155"><a href="#cb15-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-156"><a href="#cb15-156" aria-hidden="true" tabindex="-1"></a><span class="fu">## Local stats dashboard</span></span>
<span id="cb15-157"><a href="#cb15-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-158"><a href="#cb15-158" aria-hidden="true" tabindex="-1"></a>I first used value boxes in the local stats dashboard so that I could provide people with a high level stat on the front page, and added on a click through ability so visitors could be taken to the relevant metric tab.</span>
<span id="cb15-159"><a href="#cb15-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-160"><a href="#cb15-160" aria-hidden="true" tabindex="-1"></a>One of the major benefits of this was for mobile visitors, who would often get stuck on the first page of the dashboard because the sidebar had been hidden by default. This tutorial will show how to build the initial value boxes, change the styling of the boxes to fit our brand guidelines, and then add the interactivity.</span>
<span id="cb15-161"><a href="#cb15-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-162"><a href="#cb15-162" aria-hidden="true" tabindex="-1"></a>::: {.complete layout="<span class="co">[</span><span class="ot">-1, 4, -1</span><span class="co">]</span>"}</span>
<span id="cb15-163"><a href="#cb15-163" aria-hidden="true" tabindex="-1"></a><span class="in">```{r selection}</span></span>
<span id="cb15-164"><a href="#cb15-164" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb15-165"><a href="#cb15-165" aria-hidden="true" tabindex="-1"></a>tags<span class="sc">$</span><span class="fu">style</span>(<span class="at">type =</span> <span class="st">"text/css"</span>,</span>
<span id="cb15-166"><a href="#cb15-166" aria-hidden="true" tabindex="-1"></a>          <span class="st">"</span></span>
<span id="cb15-167"><a href="#cb15-167" aria-hidden="true" tabindex="-1"></a><span class="st">          /* round the corner of boxes on home tab */</span></span>
<span id="cb15-168"><a href="#cb15-168" aria-hidden="true" tabindex="-1"></a><span class="st">            #incidence_VB .bslib-value-box {</span></span>
<span id="cb15-169"><a href="#cb15-169" aria-hidden="true" tabindex="-1"></a><span class="st">              border-radius: 6px;</span></span>
<span id="cb15-170"><a href="#cb15-170" aria-hidden="true" tabindex="-1"></a><span class="st">            }</span></span>
<span id="cb15-171"><a href="#cb15-171" aria-hidden="true" tabindex="-1"></a><span class="st">          /*set font size of title in box on home tab*/</span></span>
<span id="cb15-172"><a href="#cb15-172" aria-hidden="true" tabindex="-1"></a><span class="st">            #incidence_VB .bslib-value-box .value-box-title {</span></span>
<span id="cb15-173"><a href="#cb15-173" aria-hidden="true" tabindex="-1"></a><span class="st">              font-size: 15px;</span></span>
<span id="cb15-174"><a href="#cb15-174" aria-hidden="true" tabindex="-1"></a><span class="st">              font-family: Poppins, Arial Bold, Arial, sans-serif;</span></span>
<span id="cb15-175"><a href="#cb15-175" aria-hidden="true" tabindex="-1"></a><span class="st">              margin-bottom: 5px;</span></span>
<span id="cb15-176"><a href="#cb15-176" aria-hidden="true" tabindex="-1"></a><span class="st">            }</span></span>
<span id="cb15-177"><a href="#cb15-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-178"><a href="#cb15-178" aria-hidden="true" tabindex="-1"></a><span class="st">            #incidence_VB .bslib-value-box .value-box-value {</span></span>
<span id="cb15-179"><a href="#cb15-179" aria-hidden="true" tabindex="-1"></a><span class="st">                font-size: 28px;</span></span>
<span id="cb15-180"><a href="#cb15-180" aria-hidden="true" tabindex="-1"></a><span class="st">                font-family: Progress Medium, Arial Bold, Arial, sans-serif;</span></span>
<span id="cb15-181"><a href="#cb15-181" aria-hidden="true" tabindex="-1"></a><span class="st">                margin-bottom: 5px;</span></span>
<span id="cb15-182"><a href="#cb15-182" aria-hidden="true" tabindex="-1"></a><span class="st">            }</span></span>
<span id="cb15-183"><a href="#cb15-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-184"><a href="#cb15-184" aria-hidden="true" tabindex="-1"></a><span class="st">          /*icon colour for value boxes */</span></span>
<span id="cb15-185"><a href="#cb15-185" aria-hidden="true" tabindex="-1"></a><span class="st">        #incidence_VB .fa-people-group {</span></span>
<span id="cb15-186"><a href="#cb15-186" aria-hidden="true" tabindex="-1"></a><span class="st">              opacity: 1;</span></span>
<span id="cb15-187"><a href="#cb15-187" aria-hidden="true" tabindex="-1"></a><span class="st">              color: #009cee;</span></span>
<span id="cb15-188"><a href="#cb15-188" aria-hidden="true" tabindex="-1"></a><span class="st">              font-size: 3rem;</span></span>
<span id="cb15-189"><a href="#cb15-189" aria-hidden="true" tabindex="-1"></a><span class="st">          }</span></span>
<span id="cb15-190"><a href="#cb15-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-191"><a href="#cb15-191" aria-hidden="true" tabindex="-1"></a><span class="st">        #incidence_VB .bslib-value-box .value-box-showcase .bi, .bslib-value-box .value-box-showcase .fa, .bslib-value-box .value-box-showcase .fab, .bslib-value-box .value-box-showcase .fas, .bslib {                </span></span>
<span id="cb15-192"><a href="#cb15-192" aria-hidden="true" tabindex="-1"></a><span class="st">                padding-left: 0px;</span></span>
<span id="cb15-193"><a href="#cb15-193" aria-hidden="true" tabindex="-1"></a><span class="st">                padding-right: 10px;</span></span>
<span id="cb15-194"><a href="#cb15-194" aria-hidden="true" tabindex="-1"></a><span class="st">                padding-top: 10px;</span></span>
<span id="cb15-195"><a href="#cb15-195" aria-hidden="true" tabindex="-1"></a><span class="st">                padding-bottom: 10px;</span></span>
<span id="cb15-196"><a href="#cb15-196" aria-hidden="true" tabindex="-1"></a><span class="st">                margin-bottom: 5px;</span></span>
<span id="cb15-197"><a href="#cb15-197" aria-hidden="true" tabindex="-1"></a><span class="st">        }</span></span>
<span id="cb15-198"><a href="#cb15-198" aria-hidden="true" tabindex="-1"></a><span class="st">        </span></span>
<span id="cb15-199"><a href="#cb15-199" aria-hidden="true" tabindex="-1"></a><span class="st">          #incidence_VB a:link {</span></span>
<span id="cb15-200"><a href="#cb15-200" aria-hidden="true" tabindex="-1"></a><span class="st">           color: #009cee;</span></span>
<span id="cb15-201"><a href="#cb15-201" aria-hidden="true" tabindex="-1"></a><span class="st">          }</span></span>
<span id="cb15-202"><a href="#cb15-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-203"><a href="#cb15-203" aria-hidden="true" tabindex="-1"></a><span class="st">         #incidence_VB a:hover {</span></span>
<span id="cb15-204"><a href="#cb15-204" aria-hidden="true" tabindex="-1"></a><span class="st">           color: #4dbaf3;</span></span>
<span id="cb15-205"><a href="#cb15-205" aria-hidden="true" tabindex="-1"></a><span class="st">         }</span></span>
<span id="cb15-206"><a href="#cb15-206" aria-hidden="true" tabindex="-1"></a><span class="st">          "</span></span>
<span id="cb15-207"><a href="#cb15-207" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb15-208"><a href="#cb15-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-209"><a href="#cb15-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-210"><a href="#cb15-210" aria-hidden="true" tabindex="-1"></a><span class="fu">selectizeInput</span>(<span class="at">inputId =</span> <span class="st">'select_conList'</span>,</span>
<span id="cb15-211"><a href="#cb15-211" aria-hidden="true" tabindex="-1"></a>               <span class="at">label =</span> <span class="st">''</span>,</span>
<span id="cb15-212"><a href="#cb15-212" aria-hidden="true" tabindex="-1"></a>               <span class="at">choices =</span> PCON,</span>
<span id="cb15-213"><a href="#cb15-213" aria-hidden="true" tabindex="-1"></a>               <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb15-214"><a href="#cb15-214" aria-hidden="true" tabindex="-1"></a>                 <span class="at">placeholder =</span> <span class="st">'Search for a constituency'</span>,</span>
<span id="cb15-215"><a href="#cb15-215" aria-hidden="true" tabindex="-1"></a>                 <span class="at">onInitialize =</span> <span class="fu">I</span>(<span class="st">'function() { this.setValue(" "); }'</span>)</span>
<span id="cb15-216"><a href="#cb15-216" aria-hidden="true" tabindex="-1"></a>               ),</span>
<span id="cb15-217"><a href="#cb15-217" aria-hidden="true" tabindex="-1"></a>               <span class="at">width =</span> <span class="st">'100%'</span></span>
<span id="cb15-218"><a href="#cb15-218" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-219"><a href="#cb15-219" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-220"><a href="#cb15-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-221"><a href="#cb15-221" aria-hidden="true" tabindex="-1"></a><span class="in">```{r overview_value_box}</span></span>
<span id="cb15-222"><a href="#cb15-222" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb15-223"><a href="#cb15-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-224"><a href="#cb15-224" aria-hidden="true" tabindex="-1"></a><span class="fu">value_box</span>(</span>
<span id="cb15-225"><a href="#cb15-225" aria-hidden="true" tabindex="-1"></a>  <span class="at">id =</span> <span class="st">"incidence_VB"</span>,</span>
<span id="cb15-226"><a href="#cb15-226" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="fu">p</span>(<span class="st">"Cancer Incidence"</span>, </span>
<span id="cb15-227"><a href="#cb15-227" aria-hidden="true" tabindex="-1"></a>            <span class="fu">hr</span>(<span class="at">style =</span> <span class="st">"width:100%; </span></span>
<span id="cb15-228"><a href="#cb15-228" aria-hidden="true" tabindex="-1"></a><span class="st">               text-align:right; </span></span>
<span id="cb15-229"><a href="#cb15-229" aria-hidden="true" tabindex="-1"></a><span class="st">               margin-left:5; </span></span>
<span id="cb15-230"><a href="#cb15-230" aria-hidden="true" tabindex="-1"></a><span class="st">               border-top: 5px solid #000000; </span></span>
<span id="cb15-231"><a href="#cb15-231" aria-hidden="true" tabindex="-1"></a><span class="st">               margin-top: 5px; </span></span>
<span id="cb15-232"><a href="#cb15-232" aria-hidden="true" tabindex="-1"></a><span class="st">               margin-bottom: 10px;</span></span>
<span id="cb15-233"><a href="#cb15-233" aria-hidden="true" tabindex="-1"></a><span class="st">               opacity: 1;"</span>)</span>
<span id="cb15-234"><a href="#cb15-234" aria-hidden="true" tabindex="-1"></a>            ),</span>
<span id="cb15-235"><a href="#cb15-235" aria-hidden="true" tabindex="-1"></a>  <span class="at">value =</span> <span class="fu">uiOutput</span>(<span class="at">outputId =</span> <span class="st">"IncConValue"</span>),</span>
<span id="cb15-236"><a href="#cb15-236" aria-hidden="true" tabindex="-1"></a>  <span class="at">showcase_layout =</span> <span class="fu">showcase_left_center</span>(<span class="at">width =</span> <span class="fl">0.18</span>,</span>
<span id="cb15-237"><a href="#cb15-237" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">width_full_screen =</span> <span class="st">"1fr"</span>),</span>
<span id="cb15-238"><a href="#cb15-238" aria-hidden="true" tabindex="-1"></a>  <span class="at">showcase =</span> <span class="fu">icon</span>(<span class="st">"people-group"</span>, <span class="st">"fa-2x"</span>),</span>
<span id="cb15-239"><a href="#cb15-239" aria-hidden="true" tabindex="-1"></a>  <span class="at">theme =</span> <span class="fu">value_box_theme</span>(<span class="at">bg =</span> <span class="st">"#f7f7f7"</span>, <span class="at">fg =</span> <span class="st">"#000000"</span>),</span>
<span id="cb15-240"><a href="#cb15-240" aria-hidden="true" tabindex="-1"></a>  <span class="at">class =</span> <span class="st">"border-0"</span>,</span>
<span id="cb15-241"><a href="#cb15-241" aria-hidden="true" tabindex="-1"></a>  <span class="fu">p</span>(<span class="fu">uiOutput</span>(<span class="at">outputId =</span> <span class="st">"IncConDetail"</span>)),</span>
<span id="cb15-242"><a href="#cb15-242" aria-hidden="true" tabindex="-1"></a>  <span class="fu">actionLink</span>(<span class="at">inputId =</span> <span class="st">"link_to_incidence"</span>, </span>
<span id="cb15-243"><a href="#cb15-243" aria-hidden="true" tabindex="-1"></a>             <span class="fu">p</span>(<span class="st">"explore metric "</span>, <span class="fu">icon</span>(<span class="st">'circle-chevron-right'</span>)),</span>
<span id="cb15-244"><a href="#cb15-244" aria-hidden="true" tabindex="-1"></a>  <span class="at">style =</span> <span class="st">'text-align: right; padding: 5px; text-decoration: none; font-size: 15px'</span>)  </span>
<span id="cb15-245"><a href="#cb15-245" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-246"><a href="#cb15-246" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-247"><a href="#cb15-247" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb15-248"><a href="#cb15-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-249"><a href="#cb15-249" aria-hidden="true" tabindex="-1"></a><span class="in">```{r server}</span></span>
<span id="cb15-250"><a href="#cb15-250" aria-hidden="true" tabindex="-1"></a><span class="co">#| context: server</span></span>
<span id="cb15-251"><a href="#cb15-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-252"><a href="#cb15-252" aria-hidden="true" tabindex="-1"></a><span class="co">#Reactive variable storing the selection box input</span></span>
<span id="cb15-253"><a href="#cb15-253" aria-hidden="true" tabindex="-1"></a>chosen_pcon <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb15-254"><a href="#cb15-254" aria-hidden="true" tabindex="-1"></a>  input<span class="sc">$</span>select_conList</span>
<span id="cb15-255"><a href="#cb15-255" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb15-256"><a href="#cb15-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-257"><a href="#cb15-257" aria-hidden="true" tabindex="-1"></a>output<span class="sc">$</span>IncConValue <span class="ot">&lt;-</span> <span class="fu">renderUI</span>({</span>
<span id="cb15-258"><a href="#cb15-258" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Check if a constituency is selected, function will stop if not.</span></span>
<span id="cb15-259"><a href="#cb15-259" aria-hidden="true" tabindex="-1"></a>  <span class="fu">validate</span>(<span class="fu">need</span>(<span class="fu">chosen_pcon</span>(), <span class="st">''</span>))</span>
<span id="cb15-260"><a href="#cb15-260" aria-hidden="true" tabindex="-1"></a>  mapping <span class="ot">&lt;-</span> <span class="fu">rbind</span>(PCON25toSubICB22, </span>
<span id="cb15-261"><a href="#cb15-261" aria-hidden="true" tabindex="-1"></a>                   PCON25toLAD22 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Country <span class="sc">==</span> <span class="st">"Wales"</span>), </span>
<span id="cb15-262"><a href="#cb15-262" aria-hidden="true" tabindex="-1"></a>                   PCON25toScotHB, </span>
<span id="cb15-263"><a href="#cb15-263" aria-hidden="true" tabindex="-1"></a>                   PCON25toHSCT) <span class="sc">%&gt;%</span></span>
<span id="cb15-264"><a href="#cb15-264" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(PCON25NM <span class="sc">==</span> <span class="fu">chosen_pcon</span>())</span>
<span id="cb15-265"><a href="#cb15-265" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-266"><a href="#cb15-266" aria-hidden="true" tabindex="-1"></a>  Constituency <span class="ot">&lt;-</span> <span class="fu">filter</span>(Data_inc, AreaCode <span class="sc">%in%</span> mapping<span class="sc">$</span>AreaCode)</span>
<span id="cb15-267"><a href="#cb15-267" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-268"><a href="#cb15-268" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Aggregate constituency info into a single record</span></span>
<span id="cb15-269"><a href="#cb15-269" aria-hidden="true" tabindex="-1"></a>  Statement <span class="ot">&lt;-</span> Constituency <span class="sc">%&gt;%</span></span>
<span id="cb15-270"><a href="#cb15-270" aria-hidden="true" tabindex="-1"></a>    <span class="fu">transmute</span>(</span>
<span id="cb15-271"><a href="#cb15-271" aria-hidden="true" tabindex="-1"></a>      <span class="at">Country =</span> Country,</span>
<span id="cb15-272"><a href="#cb15-272" aria-hidden="true" tabindex="-1"></a>      <span class="at">YearRange =</span> YearRange,</span>
<span id="cb15-273"><a href="#cb15-273" aria-hidden="true" tabindex="-1"></a>      <span class="at">ConCases =</span> <span class="fu">sum</span>(AvgNumberOfCases),</span>
<span id="cb15-274"><a href="#cb15-274" aria-hidden="true" tabindex="-1"></a>      <span class="at">CountryIncidence =</span> CountryIncidence,</span>
<span id="cb15-275"><a href="#cb15-275" aria-hidden="true" tabindex="-1"></a>      <span class="at">AreaType =</span> AreaType</span>
<span id="cb15-276"><a href="#cb15-276" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb15-277"><a href="#cb15-277" aria-hidden="true" tabindex="-1"></a>  Statement <span class="ot">&lt;-</span> Statement[<span class="dv">1</span>,]</span>
<span id="cb15-278"><a href="#cb15-278" aria-hidden="true" tabindex="-1"></a>  shiny<span class="sc">::</span><span class="fu">p</span>(<span class="fu">paste0</span>(<span class="fu">CRUKRoundingPerYear</span>(Statement<span class="sc">$</span>ConCases)),</span>
<span id="cb15-279"><a href="#cb15-279" aria-hidden="true" tabindex="-1"></a>           <span class="at">style =</span> <span class="st">'font-family: Progress Medium, Poppins, Arial Bold, Arial, sans-serif;'</span>)</span>
<span id="cb15-280"><a href="#cb15-280" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb15-281"><a href="#cb15-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-282"><a href="#cb15-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-283"><a href="#cb15-283" aria-hidden="true" tabindex="-1"></a>output<span class="sc">$</span>IncConDetail <span class="ot">&lt;-</span> <span class="fu">renderUI</span>({</span>
<span id="cb15-284"><a href="#cb15-284" aria-hidden="true" tabindex="-1"></a>  <span class="fu">validate</span>(<span class="fu">need</span>(<span class="fu">chosen_pcon</span>(), <span class="st">''</span>))</span>
<span id="cb15-285"><a href="#cb15-285" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-286"><a href="#cb15-286" aria-hidden="true" tabindex="-1"></a>  shiny<span class="sc">::</span><span class="fu">p</span>(<span class="fu">paste0</span>(<span class="st">"new cancer cases every year"</span>))</span>
<span id="cb15-287"><a href="#cb15-287" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb15-288"><a href="#cb15-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-289"><a href="#cb15-289" aria-hidden="true" tabindex="-1"></a><span class="co"># observeEvent(input$link_to_incidence, {</span></span>
<span id="cb15-290"><a href="#cb15-290" aria-hidden="true" tabindex="-1"></a><span class="co">#   updateTabItems(session = parent, "menu", selected = "module_4_incidence")</span></span>
<span id="cb15-291"><a href="#cb15-291" aria-hidden="true" tabindex="-1"></a><span class="co"># })</span></span>
<span id="cb15-292"><a href="#cb15-292" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb15-293"><a href="#cb15-293" aria-hidden="true" tabindex="-1"></a><span class="co"># onclick("incidence_VB",</span></span>
<span id="cb15-294"><a href="#cb15-294" aria-hidden="true" tabindex="-1"></a><span class="co">#         updateTabItems(session = parent, "menu", selected = "module_4_incidence")</span></span>
<span id="cb15-295"><a href="#cb15-295" aria-hidden="true" tabindex="-1"></a><span class="co"># )</span></span>
<span id="cb15-296"><a href="#cb15-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-297"><a href="#cb15-297" aria-hidden="true" tabindex="-1"></a><span class="co"># observe({</span></span>
<span id="cb15-298"><a href="#cb15-298" aria-hidden="true" tabindex="-1"></a><span class="co">#   input$menu</span></span>
<span id="cb15-299"><a href="#cb15-299" aria-hidden="true" tabindex="-1"></a><span class="co">#   shinyjs::runjs("window.scrollTo(0, 0)")</span></span>
<span id="cb15-300"><a href="#cb15-300" aria-hidden="true" tabindex="-1"></a><span class="co"># })</span></span>
<span id="cb15-301"><a href="#cb15-301" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-302"><a href="#cb15-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-303"><a href="#cb15-303" aria-hidden="true" tabindex="-1"></a><span class="fu">## Building the value box</span></span>
<span id="cb15-304"><a href="#cb15-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-305"><a href="#cb15-305" aria-hidden="true" tabindex="-1"></a>These specific value boxes are part of the <span class="in">`bslib`</span> library. Although value boxes are available in standard <span class="in">`shiny`</span>, I'm not going to cover them in this tutorial.</span>
<span id="cb15-306"><a href="#cb15-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-307"><a href="#cb15-307" aria-hidden="true" tabindex="-1"></a>Useful reference docs for this function:</span>
<span id="cb15-308"><a href="#cb15-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-309"><a href="#cb15-309" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="ot">&lt;https://rstudio.github.io/bslib/articles/value-boxes/index.html&gt;</span></span>
<span id="cb15-310"><a href="#cb15-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-311"><a href="#cb15-311" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="ot">&lt;https://rstudio.github.io/bslib/reference/value_box.html&gt;</span></span>
<span id="cb15-312"><a href="#cb15-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-313"><a href="#cb15-313" aria-hidden="true" tabindex="-1"></a>The value box has 4 main elements to it: <span class="in">`title`</span>, <span class="in">`value`</span>, <span class="in">`detail`</span>, and the <span class="in">`showcase`</span> element</span>
<span id="cb15-314"><a href="#cb15-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-315"><a href="#cb15-315" aria-hidden="true" tabindex="-1"></a>::: {layout="<span class="co">[</span><span class="ot">-1, 4, -1</span><span class="co">]</span>"}</span>
<span id="cb15-316"><a href="#cb15-316" aria-hidden="true" tabindex="-1"></a><span class="in">```{r otter_box}</span></span>
<span id="cb15-317"><a href="#cb15-317" aria-hidden="true" tabindex="-1"></a><span class="fu">value_box</span>(<span class="at">title =</span> <span class="st">"The title"</span>,</span>
<span id="cb15-318"><a href="#cb15-318" aria-hidden="true" tabindex="-1"></a>          <span class="at">value =</span> <span class="st">"The value"</span>,</span>
<span id="cb15-319"><a href="#cb15-319" aria-hidden="true" tabindex="-1"></a>          <span class="at">showcase =</span> <span class="fu">icon</span>(<span class="st">"otter"</span>),</span>
<span id="cb15-320"><a href="#cb15-320" aria-hidden="true" tabindex="-1"></a>          <span class="st">"detail"</span>)</span>
<span id="cb15-321"><a href="#cb15-321" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-322"><a href="#cb15-322" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb15-323"><a href="#cb15-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-324"><a href="#cb15-324" aria-hidden="true" tabindex="-1"></a>If we want any of these elements to be responsive, we can use <span class="in">`renderUI()`</span> to transform any relevant data into a statement or value, and respond to any inputs from within <span class="in">`shiny`</span>.</span>
<span id="cb15-325"><a href="#cb15-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-326"><a href="#cb15-326" aria-hidden="true" tabindex="-1"></a>::: {layout="<span class="co">[</span><span class="ot">-1, 4, -1</span><span class="co">]</span>"}</span>
<span id="cb15-327"><a href="#cb15-327" aria-hidden="true" tabindex="-1"></a><span class="in">```{r otter_slider}</span></span>
<span id="cb15-328"><a href="#cb15-328" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb15-329"><a href="#cb15-329" aria-hidden="true" tabindex="-1"></a><span class="fu">sliderInput</span>(<span class="st">"Slider"</span>, <span class="st">"Select how many otters"</span>, <span class="at">min =</span> <span class="dv">1</span>, <span class="at">max =</span> <span class="dv">10</span>, <span class="at">value =</span> <span class="dv">5</span>)</span>
<span id="cb15-330"><a href="#cb15-330" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-331"><a href="#cb15-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-332"><a href="#cb15-332" aria-hidden="true" tabindex="-1"></a><span class="in">```{r otter_slider_value}</span></span>
<span id="cb15-333"><a href="#cb15-333" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "UI code"</span></span>
<span id="cb15-334"><a href="#cb15-334" aria-hidden="true" tabindex="-1"></a><span class="fu">value_box</span>(<span class="at">title =</span> <span class="st">"How many otters?"</span>,</span>
<span id="cb15-335"><a href="#cb15-335" aria-hidden="true" tabindex="-1"></a>          <span class="at">value =</span> <span class="fu">uiOutput</span>(<span class="st">"OtterCount"</span>),</span>
<span id="cb15-336"><a href="#cb15-336" aria-hidden="true" tabindex="-1"></a>          <span class="at">showcase =</span> <span class="fu">icon</span>(<span class="st">"otter"</span>),</span>
<span id="cb15-337"><a href="#cb15-337" aria-hidden="true" tabindex="-1"></a>          <span class="st">"detail"</span>)</span>
<span id="cb15-338"><a href="#cb15-338" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-339"><a href="#cb15-339" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb15-340"><a href="#cb15-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-341"><a href="#cb15-341" aria-hidden="true" tabindex="-1"></a><span class="in">```{r otter_slider_server}</span></span>
<span id="cb15-342"><a href="#cb15-342" aria-hidden="true" tabindex="-1"></a><span class="co">#| context: server</span></span>
<span id="cb15-343"><a href="#cb15-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-344"><a href="#cb15-344" aria-hidden="true" tabindex="-1"></a>output<span class="sc">$</span>OtterCount <span class="ot">&lt;-</span> <span class="fu">renderUI</span>({</span>
<span id="cb15-345"><a href="#cb15-345" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="st">"You've chosen "</span>, input<span class="sc">$</span>Slider, <span class="st">" otters"</span>)</span>
<span id="cb15-346"><a href="#cb15-346" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb15-347"><a href="#cb15-347" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-348"><a href="#cb15-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-351"><a href="#cb15-351" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb15-352"><a href="#cb15-352" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb15-353"><a href="#cb15-353" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Server code"</span></span>
<span id="cb15-354"><a href="#cb15-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-355"><a href="#cb15-355" aria-hidden="true" tabindex="-1"></a>output<span class="sc">$</span>OtterCount <span class="ot">&lt;-</span> <span class="fu">renderUI</span>({</span>
<span id="cb15-356"><a href="#cb15-356" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="st">"You've chosen "</span>, input<span class="sc">$</span>Slider, <span class="st">" otters"</span>)</span>
<span id="cb15-357"><a href="#cb15-357" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb15-358"><a href="#cb15-358" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-359"><a href="#cb15-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-360"><a href="#cb15-360" aria-hidden="true" tabindex="-1"></a><span class="fu">## Adding a link to the tab</span></span>
<span id="cb15-361"><a href="#cb15-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-362"><a href="#cb15-362" aria-hidden="true" tabindex="-1"></a>Next step is adding a link onto the value box. We can do this with an <span class="co">[</span><span class="ot">`actionLink()`</span><span class="co">](https://shiny.posit.co/r/reference/shiny/1.6.0/actionbutton)</span> which can go inside the value box (worth noting you can have several lines of "detail" code inside a value box).</span>
<span id="cb15-363"><a href="#cb15-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-364"><a href="#cb15-364" aria-hidden="true" tabindex="-1"></a>Action links don't need to live on a value box, they can be text anywhere on your dashboard (I've placed them at the top of each tab, so users can return to the homepage without needing the sidebar)</span>
<span id="cb15-365"><a href="#cb15-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-366"><a href="#cb15-366" aria-hidden="true" tabindex="-1"></a>I also added some <span class="in">`css`</span> to the action link function via the <span class="in">`style`</span> argument to move the text over to the right and give it a bit of padding so it didn't sit on the edge of the box.</span>
<span id="cb15-367"><a href="#cb15-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-370"><a href="#cb15-370" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb15-371"><a href="#cb15-371" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb15-372"><a href="#cb15-372" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: show</span></span>
<span id="cb15-373"><a href="#cb15-373" aria-hidden="true" tabindex="-1"></a><span class="fu">actionLink</span>(<span class="at">inputId =</span> <span class="st">"link_to_incidence"</span>, </span>
<span id="cb15-374"><a href="#cb15-374" aria-hidden="true" tabindex="-1"></a>           <span class="fu">p</span>(<span class="st">"explore metric "</span>, <span class="fu">icon</span>(<span class="st">'circle-chevron-right'</span>)),</span>
<span id="cb15-375"><a href="#cb15-375" aria-hidden="true" tabindex="-1"></a>           <span class="at">style =</span> <span class="st">'text-align: right; padding: 5px; text-decoration: none; font-size: 15px'</span>)</span>
<span id="cb15-376"><a href="#cb15-376" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-377"><a href="#cb15-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-378"><a href="#cb15-378" aria-hidden="true" tabindex="-1"></a>For this to work, we need to respond to it on the server side of things. Within an <span class="in">`observeEvent()`</span> we can use <span class="co">[</span><span class="ot">`updateTabItems()`</span><span class="co">](https://www.rdocumentation.org/packages/shinydashboard/versions/0.7.2/topics/updateTabItems)</span> from the <span class="in">`shinydashboard`</span> library. When clicked, this will change the active tab to the incidence tab</span>
<span id="cb15-379"><a href="#cb15-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-382"><a href="#cb15-382" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb15-383"><a href="#cb15-383" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb15-384"><a href="#cb15-384" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: show</span></span>
<span id="cb15-385"><a href="#cb15-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-386"><a href="#cb15-386" aria-hidden="true" tabindex="-1"></a><span class="fu">observeEvent</span>(input<span class="sc">$</span>link_to_incidence, {</span>
<span id="cb15-387"><a href="#cb15-387" aria-hidden="true" tabindex="-1"></a>  <span class="fu">updateTabItems</span>(<span class="at">session =</span> parent, <span class="st">"menu"</span>, <span class="at">selected =</span> <span class="st">"module_4_incidence"</span>)</span>
<span id="cb15-388"><a href="#cb15-388" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb15-389"><a href="#cb15-389" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-390"><a href="#cb15-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-391"><a href="#cb15-391" aria-hidden="true" tabindex="-1"></a>Its worth highlighting the session argument here. This is a value that is passed from the main <span class="in">`app.R`</span> script through to the module script. So when I call my module, it looks like this:</span>
<span id="cb15-392"><a href="#cb15-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-395"><a href="#cb15-395" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb15-396"><a href="#cb15-396" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb15-397"><a href="#cb15-397" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: show</span></span>
<span id="cb15-398"><a href="#cb15-398" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "calling the server from app.R"</span></span>
<span id="cb15-399"><a href="#cb15-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-400"><a href="#cb15-400" aria-hidden="true" tabindex="-1"></a><span class="fu">module_4_incidence_TabServer</span>(<span class="at">id =</span> <span class="st">"module_4_incidence"</span>,</span>
<span id="cb15-401"><a href="#cb15-401" aria-hidden="true" tabindex="-1"></a>                             <span class="at">tabData =</span> inc_timeline,</span>
<span id="cb15-402"><a href="#cb15-402" aria-hidden="true" tabindex="-1"></a>                             <span class="at">chosen_pcon =</span> chosen_pcon,</span>
<span id="cb15-403"><a href="#cb15-403" aria-hidden="true" tabindex="-1"></a>                             <span class="at">ConType =</span> ConType,</span>
<span id="cb15-404"><a href="#cb15-404" aria-hidden="true" tabindex="-1"></a>                             <span class="at">parent =</span> session)</span>
<span id="cb15-405"><a href="#cb15-405" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-406"><a href="#cb15-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-409"><a href="#cb15-409" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb15-410"><a href="#cb15-410" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb15-411"><a href="#cb15-411" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: show</span></span>
<span id="cb15-412"><a href="#cb15-412" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "the server function in the module script"</span></span>
<span id="cb15-413"><a href="#cb15-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-414"><a href="#cb15-414" aria-hidden="true" tabindex="-1"></a>module_4_incidence_TabServer <span class="ot">&lt;-</span> <span class="cf">function</span>(id, tabData, chosen_pcon, ConType, parent) {</span>
<span id="cb15-415"><a href="#cb15-415" aria-hidden="true" tabindex="-1"></a>  <span class="fu">moduleServer</span>(</span>
<span id="cb15-416"><a href="#cb15-416" aria-hidden="true" tabindex="-1"></a>    id,</span>
<span id="cb15-417"><a href="#cb15-417" aria-hidden="true" tabindex="-1"></a>    <span class="cf">function</span>(input, output, session) {</span>
<span id="cb15-418"><a href="#cb15-418" aria-hidden="true" tabindex="-1"></a>      ...</span>
<span id="cb15-419"><a href="#cb15-419" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb15-420"><a href="#cb15-420" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-421"><a href="#cb15-421" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-422"><a href="#cb15-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-423"><a href="#cb15-423" aria-hidden="true" tabindex="-1"></a>Truth be told, I don't fully understand the <span class="co">[</span><span class="ot">`session`</span><span class="co">](https://shiny.posit.co/r/reference/shiny/1.7.0/session.html)</span> argument in <span class="in">`shiny`</span> so I won't try and explain it here. But without passing it between modules the link wont work.</span>
<span id="cb15-424"><a href="#cb15-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-425"><a href="#cb15-425" aria-hidden="true" tabindex="-1"></a>The final piece to making the link work, relies on the <span class="in">`shinyjs`</span> library. If you've scrolled halfway down a tab page and click the action link, then it changes tab but it doesn't scroll back up to the top. To fix that, we can <span class="in">`observe()`</span> the menu via <span class="in">`input$menu`</span> and run some javascript every time the tab is changed that resets the window scroll. This needs to live in the main <span class="in">`app.R`</span> server call.</span>
<span id="cb15-426"><a href="#cb15-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-429"><a href="#cb15-429" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb15-430"><a href="#cb15-430" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb15-431"><a href="#cb15-431" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: show</span></span>
<span id="cb15-432"><a href="#cb15-432" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "code to reset the scroll of the window"</span></span>
<span id="cb15-433"><a href="#cb15-433" aria-hidden="true" tabindex="-1"></a><span class="fu">observe</span>({</span>
<span id="cb15-434"><a href="#cb15-434" aria-hidden="true" tabindex="-1"></a>  input<span class="sc">$</span>menu</span>
<span id="cb15-435"><a href="#cb15-435" aria-hidden="true" tabindex="-1"></a>  shinyjs<span class="sc">::</span><span class="fu">runjs</span>(<span class="st">"window.scrollTo(0, 0)"</span>)</span>
<span id="cb15-436"><a href="#cb15-436" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb15-437"><a href="#cb15-437" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-438"><a href="#cb15-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-439"><a href="#cb15-439" aria-hidden="true" tabindex="-1"></a><span class="fu">### Optional: making the whole value box clickable</span></span>
<span id="cb15-440"><a href="#cb15-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-441"><a href="#cb15-441" aria-hidden="true" tabindex="-1"></a>You can make whole elements clickable, which I did to the value boxes themselves.</span>
<span id="cb15-442"><a href="#cb15-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-443"><a href="#cb15-443" aria-hidden="true" tabindex="-1"></a>When creating the value box, you can give it an <span class="in">`id`</span> which helps shiny identify the whole value box element.</span>
<span id="cb15-444"><a href="#cb15-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-447"><a href="#cb15-447" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb15-448"><a href="#cb15-448" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb15-449"><a href="#cb15-449" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: show</span></span>
<span id="cb15-450"><a href="#cb15-450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-451"><a href="#cb15-451" aria-hidden="true" tabindex="-1"></a><span class="fu">value_box</span>(<span class="at">id =</span> <span class="st">"otter_box"</span>,</span>
<span id="cb15-452"><a href="#cb15-452" aria-hidden="true" tabindex="-1"></a>          <span class="at">title =</span> <span class="st">"The title"</span>,</span>
<span id="cb15-453"><a href="#cb15-453" aria-hidden="true" tabindex="-1"></a>          <span class="at">value =</span> <span class="st">"The value"</span>,</span>
<span id="cb15-454"><a href="#cb15-454" aria-hidden="true" tabindex="-1"></a>          <span class="at">showcase =</span> <span class="fu">icon</span>(<span class="st">"otter"</span>),</span>
<span id="cb15-455"><a href="#cb15-455" aria-hidden="true" tabindex="-1"></a>          <span class="st">"detail"</span>)</span>
<span id="cb15-456"><a href="#cb15-456" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-457"><a href="#cb15-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-458"><a href="#cb15-458" aria-hidden="true" tabindex="-1"></a>You can then refer to that id and ask shiny respond via the <span class="in">`onclick()`</span> function which is also part of the <span class="in">`shinyjs`</span> library.</span>
<span id="cb15-459"><a href="#cb15-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-462"><a href="#cb15-462" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb15-463"><a href="#cb15-463" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb15-464"><a href="#cb15-464" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: show</span></span>
<span id="cb15-465"><a href="#cb15-465" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Place this in the server section of the page your value box is on"</span></span>
<span id="cb15-466"><a href="#cb15-466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-467"><a href="#cb15-467" aria-hidden="true" tabindex="-1"></a><span class="fu">onclick</span>(<span class="st">"otter_box"</span>,</span>
<span id="cb15-468"><a href="#cb15-468" aria-hidden="true" tabindex="-1"></a>        <span class="fu">updateTabItems</span>(<span class="at">session =</span> parent, <span class="at">inputId =</span> <span class="st">"menu"</span>, <span class="at">selected =</span> <span class="st">"module_to_change_to"</span>)</span>
<span id="cb15-469"><a href="#cb15-469" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-470"><a href="#cb15-470" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-471"><a href="#cb15-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-472"><a href="#cb15-472" aria-hidden="true" tabindex="-1"></a>The downside of this method is it doesn't make it clear that the element is clickable, i.e. the mouse pointer doesn't turn into a pointing hand like it does over other links.</span>
<span id="cb15-473"><a href="#cb15-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-474"><a href="#cb15-474" aria-hidden="true" tabindex="-1"></a><span class="fu">## Styling the value box</span></span>
<span id="cb15-475"><a href="#cb15-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-476"><a href="#cb15-476" aria-hidden="true" tabindex="-1"></a>There are lots of ways to re-style the value box to make it look *just right*. However, because there are many ways to do this, it can be a real pain.</span>
<span id="cb15-477"><a href="#cb15-477" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-478"><a href="#cb15-478" aria-hidden="true" tabindex="-1"></a>Mostly I used css (and a <span class="in">`hr()`</span> line) to go from this:</span>
<span id="cb15-479"><a href="#cb15-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-480"><a href="#cb15-480" aria-hidden="true" tabindex="-1"></a>::: {#Unstyled layout="<span class="co">[</span><span class="ot">-1, 4, -1</span><span class="co">]</span>"}</span>
<span id="cb15-481"><a href="#cb15-481" aria-hidden="true" tabindex="-1"></a><span class="in">```{r basic_otter}</span></span>
<span id="cb15-482"><a href="#cb15-482" aria-hidden="true" tabindex="-1"></a><span class="fu">value_box</span>(<span class="at">title =</span> <span class="st">"The title"</span>,</span>
<span id="cb15-483"><a href="#cb15-483" aria-hidden="true" tabindex="-1"></a>          <span class="at">value =</span> <span class="st">"The value"</span>,</span>
<span id="cb15-484"><a href="#cb15-484" aria-hidden="true" tabindex="-1"></a>          <span class="at">showcase =</span> <span class="fu">icon</span>(<span class="st">"otter"</span>),</span>
<span id="cb15-485"><a href="#cb15-485" aria-hidden="true" tabindex="-1"></a>          <span class="st">"detail"</span>)</span>
<span id="cb15-486"><a href="#cb15-486" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-487"><a href="#cb15-487" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb15-488"><a href="#cb15-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-489"><a href="#cb15-489" aria-hidden="true" tabindex="-1"></a>to this:</span>
<span id="cb15-490"><a href="#cb15-490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-491"><a href="#cb15-491" aria-hidden="true" tabindex="-1"></a>::: {#StyledOtter layout="<span class="co">[</span><span class="ot">-1,4,-1</span><span class="co">]</span>"}</span>
<span id="cb15-494"><a href="#cb15-494" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb15-495"><a href="#cb15-495" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "the css I used"</span></span>
<span id="cb15-496"><a href="#cb15-496" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb15-497"><a href="#cb15-497" aria-hidden="true" tabindex="-1"></a>tags<span class="sc">$</span><span class="fu">style</span>(<span class="at">type =</span> <span class="st">"text/css"</span>,</span>
<span id="cb15-498"><a href="#cb15-498" aria-hidden="true" tabindex="-1"></a>          <span class="st">"</span></span>
<span id="cb15-499"><a href="#cb15-499" aria-hidden="true" tabindex="-1"></a><span class="st">          /* round the corner of boxes on home tab */</span></span>
<span id="cb15-500"><a href="#cb15-500" aria-hidden="true" tabindex="-1"></a><span class="st">            #stylish_otter .bslib-value-box {</span></span>
<span id="cb15-501"><a href="#cb15-501" aria-hidden="true" tabindex="-1"></a><span class="st">              border-radius: 6px;</span></span>
<span id="cb15-502"><a href="#cb15-502" aria-hidden="true" tabindex="-1"></a><span class="st">            }</span></span>
<span id="cb15-503"><a href="#cb15-503" aria-hidden="true" tabindex="-1"></a><span class="st">          /*set font size of title in box on home tab*/</span></span>
<span id="cb15-504"><a href="#cb15-504" aria-hidden="true" tabindex="-1"></a><span class="st">            #stylish_otter .bslib-value-box .value-box-title {</span></span>
<span id="cb15-505"><a href="#cb15-505" aria-hidden="true" tabindex="-1"></a><span class="st">              font-size: 15px;</span></span>
<span id="cb15-506"><a href="#cb15-506" aria-hidden="true" tabindex="-1"></a><span class="st">              font-family: Poppins, Arial Bold, Arial, sans-serif;</span></span>
<span id="cb15-507"><a href="#cb15-507" aria-hidden="true" tabindex="-1"></a><span class="st">              margin-bottom: 5px;</span></span>
<span id="cb15-508"><a href="#cb15-508" aria-hidden="true" tabindex="-1"></a><span class="st">            }</span></span>
<span id="cb15-509"><a href="#cb15-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-510"><a href="#cb15-510" aria-hidden="true" tabindex="-1"></a><span class="st">            /* set the font size of the value 8?</span></span>
<span id="cb15-511"><a href="#cb15-511" aria-hidden="true" tabindex="-1"></a><span class="st">            #stylish_otter .bslib-value-box .value-box-value {</span></span>
<span id="cb15-512"><a href="#cb15-512" aria-hidden="true" tabindex="-1"></a><span class="st">                font-size: 28px;</span></span>
<span id="cb15-513"><a href="#cb15-513" aria-hidden="true" tabindex="-1"></a><span class="st">                font-family: Progress Medium, Arial Bold, Arial, sans-serif;</span></span>
<span id="cb15-514"><a href="#cb15-514" aria-hidden="true" tabindex="-1"></a><span class="st">                margin-bottom: 5px;</span></span>
<span id="cb15-515"><a href="#cb15-515" aria-hidden="true" tabindex="-1"></a><span class="st">            }</span></span>
<span id="cb15-516"><a href="#cb15-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-517"><a href="#cb15-517" aria-hidden="true" tabindex="-1"></a><span class="st">          /*icon colour for the otter */</span></span>
<span id="cb15-518"><a href="#cb15-518" aria-hidden="true" tabindex="-1"></a><span class="st">          #stylish_otter .fa-otter {</span></span>
<span id="cb15-519"><a href="#cb15-519" aria-hidden="true" tabindex="-1"></a><span class="st">              opacity: 1;</span></span>
<span id="cb15-520"><a href="#cb15-520" aria-hidden="true" tabindex="-1"></a><span class="st">              color: #009cee;</span></span>
<span id="cb15-521"><a href="#cb15-521" aria-hidden="true" tabindex="-1"></a><span class="st">              font-size: 3rem;</span></span>
<span id="cb15-522"><a href="#cb15-522" aria-hidden="true" tabindex="-1"></a><span class="st">          }</span></span>
<span id="cb15-523"><a href="#cb15-523" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-524"><a href="#cb15-524" aria-hidden="true" tabindex="-1"></a><span class="st">          #stylish_otter .bslib-value-box .value-box-showcase .bi, .bslib-value-box .value-box-showcase .fa, .bslib-value-box .value-box-showcase .fab, .bslib-value-box .value-box-showcase .fas, .bslib {                </span></span>
<span id="cb15-525"><a href="#cb15-525" aria-hidden="true" tabindex="-1"></a><span class="st">                padding-left: 0px;</span></span>
<span id="cb15-526"><a href="#cb15-526" aria-hidden="true" tabindex="-1"></a><span class="st">                padding-right: 10px;</span></span>
<span id="cb15-527"><a href="#cb15-527" aria-hidden="true" tabindex="-1"></a><span class="st">                padding-top: 10px;</span></span>
<span id="cb15-528"><a href="#cb15-528" aria-hidden="true" tabindex="-1"></a><span class="st">                padding-bottom: 10px;</span></span>
<span id="cb15-529"><a href="#cb15-529" aria-hidden="true" tabindex="-1"></a><span class="st">                margin-bottom: 5px;</span></span>
<span id="cb15-530"><a href="#cb15-530" aria-hidden="true" tabindex="-1"></a><span class="st">        }</span></span>
<span id="cb15-531"><a href="#cb15-531" aria-hidden="true" tabindex="-1"></a><span class="st">        </span></span>
<span id="cb15-532"><a href="#cb15-532" aria-hidden="true" tabindex="-1"></a><span class="st">          #stylish_otter a:link {</span></span>
<span id="cb15-533"><a href="#cb15-533" aria-hidden="true" tabindex="-1"></a><span class="st">           color: #009cee;</span></span>
<span id="cb15-534"><a href="#cb15-534" aria-hidden="true" tabindex="-1"></a><span class="st">          }</span></span>
<span id="cb15-535"><a href="#cb15-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-536"><a href="#cb15-536" aria-hidden="true" tabindex="-1"></a><span class="st">         #stylish_otter a:hover {</span></span>
<span id="cb15-537"><a href="#cb15-537" aria-hidden="true" tabindex="-1"></a><span class="st">           color: #4dbaf3;</span></span>
<span id="cb15-538"><a href="#cb15-538" aria-hidden="true" tabindex="-1"></a><span class="st">         }</span></span>
<span id="cb15-539"><a href="#cb15-539" aria-hidden="true" tabindex="-1"></a><span class="st">          "</span></span>
<span id="cb15-540"><a href="#cb15-540" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-541"><a href="#cb15-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-542"><a href="#cb15-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-543"><a href="#cb15-543" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-544"><a href="#cb15-544" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-547"><a href="#cb15-547" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb15-548"><a href="#cb15-548" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "The complete value box"</span></span>
<span id="cb15-549"><a href="#cb15-549" aria-hidden="true" tabindex="-1"></a><span class="fu">value_box</span>(<span class="at">id =</span> <span class="st">"stylish_otter"</span>,</span>
<span id="cb15-550"><a href="#cb15-550" aria-hidden="true" tabindex="-1"></a>          <span class="at">title =</span> <span class="fu">p</span>(<span class="st">"Fancy value box"</span>,</span>
<span id="cb15-551"><a href="#cb15-551" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">hr</span>(<span class="at">style =</span> <span class="st">"width:100%; </span></span>
<span id="cb15-552"><a href="#cb15-552" aria-hidden="true" tabindex="-1"></a><span class="st">                     text-align:right; </span></span>
<span id="cb15-553"><a href="#cb15-553" aria-hidden="true" tabindex="-1"></a><span class="st">                     margin-left:5; </span></span>
<span id="cb15-554"><a href="#cb15-554" aria-hidden="true" tabindex="-1"></a><span class="st">                     border-top: 5px solid #000000; </span></span>
<span id="cb15-555"><a href="#cb15-555" aria-hidden="true" tabindex="-1"></a><span class="st">                     margin-top: 5px; </span></span>
<span id="cb15-556"><a href="#cb15-556" aria-hidden="true" tabindex="-1"></a><span class="st">                     margin-bottom: 10px;</span></span>
<span id="cb15-557"><a href="#cb15-557" aria-hidden="true" tabindex="-1"></a><span class="st">                     opacity: 1;"</span>)),</span>
<span id="cb15-558"><a href="#cb15-558" aria-hidden="true" tabindex="-1"></a>          <span class="at">value =</span> <span class="st">"The big otter"</span>,</span>
<span id="cb15-559"><a href="#cb15-559" aria-hidden="true" tabindex="-1"></a>          <span class="at">showcase =</span> <span class="fu">icon</span>(<span class="st">"otter"</span>),</span>
<span id="cb15-560"><a href="#cb15-560" aria-hidden="true" tabindex="-1"></a>          <span class="st">"otter text"</span>,</span>
<span id="cb15-561"><a href="#cb15-561" aria-hidden="true" tabindex="-1"></a>          <span class="at">theme =</span> <span class="fu">value_box_theme</span>(<span class="at">bg =</span> <span class="st">"#f7f7f7"</span>, <span class="at">fg =</span> <span class="st">"#000000"</span>),</span>
<span id="cb15-562"><a href="#cb15-562" aria-hidden="true" tabindex="-1"></a>          <span class="at">class =</span> <span class="st">"border-0"</span>,</span>
<span id="cb15-563"><a href="#cb15-563" aria-hidden="true" tabindex="-1"></a>          <span class="fu">actionLink</span>(<span class="at">inputId =</span> <span class="st">"link_to_incidence"</span>, </span>
<span id="cb15-564"><a href="#cb15-564" aria-hidden="true" tabindex="-1"></a>             <span class="fu">p</span>(<span class="st">"Link to otters"</span>, <span class="fu">icon</span>(<span class="st">'circle-chevron-right'</span>)),</span>
<span id="cb15-565"><a href="#cb15-565" aria-hidden="true" tabindex="-1"></a>             <span class="at">style =</span> <span class="st">'text-align: right; padding: 5px; text-decoration: none; font-size: 15px'</span>))</span>
<span id="cb15-566"><a href="#cb15-566" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb15-567"><a href="#cb15-567" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb15-568"><a href="#cb15-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-569"><a href="#cb15-569" aria-hidden="true" tabindex="-1"></a>You can add this <span class="in">`css`</span> in-line, or you can add it in a separate css file (I find this method tidier). If you want your css to only apply to one value box, the add the id of your value box before the <span class="in">`css`</span> classes, so in this example <span class="in">`#stylish_otter`</span> is before all the <span class="in">`css`</span> classes.</span>
<span id="cb15-570"><a href="#cb15-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-571"><a href="#cb15-571" aria-hidden="true" tabindex="-1"></a>I decided to add the <span class="in">`css`</span> for the <span class="in">`hr()`</span> directly in the function as an easier way of only changing this specific <span class="in">`hr`</span> and not affecting all the others.</span>
<span id="cb15-572"><a href="#cb15-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-573"><a href="#cb15-573" aria-hidden="true" tabindex="-1"></a>You can also use the <span class="in">`class`</span> argument in <span class="in">`value_box()`</span> as a short-cut for any predefined <span class="in">`bootstrap`</span> <span class="in">`css`</span> settings (I've used <span class="in">`"border-0"`</span> to disable the border around the box).</span>
<span id="cb15-574"><a href="#cb15-574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-575"><a href="#cb15-575" aria-hidden="true" tabindex="-1"></a>I've also used the <span class="in">`theme`</span> argument to set the background colour, and the foreground text colour.</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>